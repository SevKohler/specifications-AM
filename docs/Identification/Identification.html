<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="description" content="openEHR Archetype Identification specification">
<meta name="keywords" content="archetype, openehr, aom, aom2">
<title>Archetype Identification specification</title>
<link rel="stylesheet" href="../../../spec-publish-asciidoc/resources/css/openehr.css">
<link rel="stylesheet" href="../../../spec-publish-asciidoc/resources/css/pygments-default.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_archetype_identification_specification">Archetype Identification specification</a>
<ul class="sectlevel1">
<li><a href="#_amendment_record">Amendment Record</a></li>
<li><a href="#_acknowledgements">Acknowledgements</a>
<ul class="sectlevel2">
<li><a href="#_primary_author">Primary Author</a></li>
<li><a href="#_contributors">Contributors</a></li>
<li><a href="#_trademarks">Trademarks</a></li>
<li><a href="#_supporters">Supporters</a></li>
</ul>
</li>
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_purpose">1.1. Purpose</a></li>
<li><a href="#_related_documents">1.2. Related Documents</a></li>
<li><a href="#_status">1.3. Status</a></li>
<li><a href="#_tools">1.4. Tools</a></li>
</ul>
</li>
<li><a href="#_overview">2. Overview</a>
<ul class="sectlevel2">
<li><a href="#_the_environment">2.1. The Environment</a></li>
<li><a href="#_the_problem">2.2. The Problem</a></li>
<li><a href="#_human_readable_and_machine_identifiers">2.3. Human-readable and Machine Identifiers</a></li>
<li><a href="#_meta_data">2.4. Meta-data</a></li>
</ul>
</li>
<li><a href="#_source_artefact_identification">3. Source Artefact Identification</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_formal_model">3.2. Formal Model</a>
<ul class="sectlevel3">
<li><a href="#_human_readable_identifier_hrid">3.2.1. Human-readable Identifier (HRID)</a></li>
<li><a href="#_archetype_identifier">3.2.2. Archetype Identifier</a>
<ul class="sectlevel4">
<li><a href="#_concept_identifier">Concept Identifier</a></li>
<li><a href="#_legacy_adl_1_4_semantics">Legacy ADL 1.4 Semantics</a></li>
<li><a href="#_concept_identifier_semantics">Concept Identifier Semantics</a></li>
<li><a href="#_need_for_rm_class_name_in_identifier">Need for RM Class Name in Identifier</a></li>
</ul>
</li>
<li><a href="#_template_identifier">3.2.3. Template Identifier</a></li>
<li><a href="#_terminology_subset_identifier">3.2.4. Terminology Subset Identifier</a></li>
<li><a href="#_query_set_identifier">3.2.5. Query Set Identifier</a></li>
</ul>
</li>
<li><a href="#_versioning">3.3. Versioning</a>
<ul class="sectlevel3">
<li><a href="#_general_model">3.3.1. General Model</a></li>
<li><a href="#_version_numbering">3.3.2. Version Numbering</a></li>
<li><a href="#_change_semantics">3.3.3. Change Semantics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_lifecycle_model">4. Lifecycle Model</a>
<ul class="sectlevel2">
<li><a href="#_conceptual_model">4.1. Conceptual Model</a></li>
<li><a href="#_lifecycle_based_versioning">4.2. Lifecycle-based Versioning</a></li>
<li><a href="#_change_scenarios">4.3. Change Scenarios</a>
<ul class="sectlevel3">
<li><a href="#_change_to_definition">4.3.1. Change to Definition</a></li>
<li><a href="#_change_to_terminology_definition">4.3.2. Change to Terminology Definition</a></li>
<li><a href="#_addition_of_terminology_translation">4.3.3. Addition of Terminology Translation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_distributed_governance">5. Distributed Governance</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">5.1. Overview</a></li>
<li><a href="#_management">5.2. Management</a></li>
<li><a href="#_transfer_and_forking">5.3. Transfer and Forking</a></li>
</ul>
</li>
<li><a href="#_referencing">6. Referencing</a>
<ul class="sectlevel2">
<li><a href="#_source_artefact_references">6.1. Source Artefact References</a>
<ul class="sectlevel3">
<li><a href="#_archetype_external_references_adl_aom_2">6.1.1. Archetype External References (ADL/AOM 2)</a></li>
<li><a href="#_template_references_to_archetypes_and_templates">6.1.2. Template References to Archetypes and Templates</a></li>
<li><a href="#_between_specialised_archetypes">6.1.3. Between Specialised Archetypes</a></li>
</ul>
</li>
<li><a href="#_source_artefact_relationship_constraints">6.2. Source Artefact Relationship Constraints</a>
<ul class="sectlevel3">
<li><a href="#_adl_1_4_archetype_slots">6.2.1. ADL 1.4 Archetype Slots</a></li>
<li><a href="#_adl_2_archetype_slots">6.2.2. ADL 2 Archetype Slots</a></li>
</ul>
</li>
<li><a href="#_aql_query_sets">6.3. AQL Query Sets</a></li>
<li><a href="#_aql_queries">6.4. AQL Queries</a></li>
<li><a href="#_operational_artefacts">6.5. Operational Artefacts</a></li>
<li><a href="#_references_from_data">6.6. References from Data</a>
<ul class="sectlevel3">
<li><a href="#_requirements">6.6.1. Requirements</a></li>
<li><a href="#_reconstitutability">6.6.2. Reconstitutability</a></li>
<li><a href="#_supporting_archetype_based_querying">6.6.3. Supporting Archetype-based Querying</a></li>
<li><a href="#_formal_model_2">6.6.4. Formal Model</a></li>
<li><a href="#_optimisations">6.6.5. Optimisations</a>
<ul class="sectlevel4">
<li><a href="#_identifier_aliasing">Identifier Aliasing</a></li>
<li><a href="#_reference_compression">Reference Compression</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_a_reliable_uri_for_knowledge_resources">7. A Reliable URI for Knowledge Resources</a></li>
<li><a href="#_artefact_authentication">8. Artefact Authentication</a>
<ul class="sectlevel2">
<li><a href="#_integrity_check">8.1. Integrity Check</a></li>
<li><a href="#_authentication">8.2. Authentication</a></li>
<li><a href="#_canonical_form_archetype_semantic_view">8.3. Canonical Form – Archetype 'semantic view'</a></li>
</ul>
</li>
<li><a href="#_scenarios">9. Scenarios</a>
<ul class="sectlevel2">
<li><a href="#_minor_version_upgrade">9.1. Minor Version Upgrade</a></li>
<li><a href="#_major_version_upgrade">9.2. Major Version Upgrade</a></li>
<li><a href="#_templates_using_archteypes_and_subsets">9.3. Templates using Archteypes and Subsets</a></li>
<li><a href="#_artefact_transfer_fork">9.4. Artefact Transfer / Fork</a></li>
</ul>
</li>
<li><a href="#_references">References</a>
<ul class="sectlevel2">
<li><a href="#_publications">Publications</a></li>
<li><a href="#_resources">Resources</a></li>
<li><a href="#_openehr_resources">openEHR Resources</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="../../../spec-publish-asciidoc/resources/images/openehr_logo_large.png" alt="openEHR logo">
</div>
</div>
</div>
</div>
<h1 id="_archetype_identification_specification" class="sect0">Archetype Identification specification</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="3"><strong>Issuer</strong>: <a href="http://www.openehr.org/programs/specification/">openEHR Specification Program</a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Revision</strong>: <a href="#latest_issue">[latest_issue]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong>: <a href="#latest_issue_date">[latest_issue_date]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong>: Development</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock"><strong>Keywords</strong>: archetype, identification, governance</p></td>
</tr>
</tbody>
</table>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="diagrams/openehr_block_diagram.png" alt="openEHR components" width="60%">
</div>
</div>
<div class="literalblock">
<div class="content">
<pre> </pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top" colspan="2">&#169; 2009 - 2015 The openEHR Foundation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><a href="http://www.openehr.org/">The openEHR Foundation</a> is an independent, non-profit community organisation, facilitating the sharing of health records by consumers and clinicians via open-source, standards-based implementations.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Affiliates</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Australia, Brazil, Japan, New Zealand, Slovenia, Norway</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><img src="../../../spec-publish-asciidoc/resources/images/cc-by-nd-88x31.png" alt="image"></span> Creative Commons Attribution-NoDerivs 3.0 Unported. <a href="https://creativecommons.org/licenses/by-nd/3.0/" class="bare">https://creativecommons.org/licenses/by-nd/3.0/</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><strong>Support</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues: <a href="https://openehr.atlassian.net/browse/SPECPR/" class="bare">https://openehr.atlassian.net/browse/SPECPR/</a><br>
 Web: <a href="http://www.openehr.org/" class="bare">http://www.openehr.org/</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amendment_record">Amendment Record</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9%;">
<col style="width: 54%;">
<col style="width: 18%;">
<col style="width: 18%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Issue</th>
<th class="tableblock halign-left valign-top">Details</th>
<th class="tableblock halign-left valign-top">Raiser</th>
<th class="tableblock halign-left valign-top">Completed</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue"></a>0.7.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace ‘-unstable’ with '-alpha' to be compatible with typical tools.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="latest_issue_date"></a>01 Feb 2015</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replace ‘+uNNN’ with ‘-unstable’; simplify the number after ‘rc’ to an integer build count.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde,<br>
 I McNicoll,<br>
 H Leslie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">29 Sep 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove <code><em>build_count</em></code>, replace with <code><em>instance_uid</em></code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">I McNicoll<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">28 May 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change <code>ARCHEYTPE_HRID</code>.<code><em>commit_number</em></code> to <code><em>build_count</em></code>. Build_count reset to 1 on each version change. Adjust diagrams and explanations.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde<br>
 I McNicoll<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 May 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simplify development state in lifecycle; merge ‘initial’ and rename ‘draft’.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde<br>
 I McNicoll</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 May 2014</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.7.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rewrite referencing section; update ‘problem description; further grammar improvements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 Jun 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove errors and ambiguities to do with explanation of human readable identifier; improve nomenclature; rewrite grammar.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 Jun 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.6.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Major update based on CKM clinical group analysis, and feedback from the CIMI and openEHR communities.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">S Garde<br>
 H Leslie<br>
 I McNicoll<br>
 T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21 Apr 2013</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refinements to do with template identification.<br>
 Review from Medical Centrum Alkmaar (Netherlands).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale<br>
 M van der Meer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">01 Feb 2010</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial Writing.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T Beale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09 Jul 2009</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_primary_author">Primary Author</h3>
<div class="ulist">
<ul>
<li>
<p>Thomas Beale, Ocean Informatics UK; openEHR Foundation Management Board</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">Contributors</h3>
<div class="paragraph">
<p>This specification has benefited from input from the openEHR and wider health informatics community. The openEHR Foundation would like to recognise the following people and institutions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sebastian Garde, PhD, Ocean Informatics</p>
</li>
<li>
<p>Heather Leslie MD, Ocean Informatics</p>
</li>
<li>
<p>Ian McNicoll MD, MSc, Ocean Informatics UK</p>
</li>
<li>
<p>Martin van der Meer, Code24, Netherlands</p>
</li>
<li>
<p>David Moner PhD, Universitat Politècnica de València, Spain</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_trademarks">Trademarks</h3>
<div class="ulist">
<ul>
<li>
<p>'openEHR' is a registered trademark of The openEHR Foundation</p>
</li>
<li>
<p>'SNOMED CT' is a registered trademark of IHTSDO</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_supporters">Supporters</h3>
<div class="paragraph">
<p>The work reported in this document was funded by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ocean Informatics;</p>
</li>
<li>
<p>University College London, Centre for Health Informatics and Multi-professional Education (CHIME).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">1.1. Purpose</h3>
<div class="paragraph">
<p>The purpose of this document is to describe an identification system for health informatics knowledge artefacts, including archetype, template and terminology subsets. This includes such artefacts created by organisations such as the openEHR Foundation, standards bodies and clinical modelling initiatives.</p>
</div>
<div class="paragraph">
<p>The semantics covered include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>formal human-readable and machine identifiers;</p>
</li>
<li>
<p>versioning;</p>
</li>
<li>
<p>lifecycle management and states;</p>
</li>
<li>
<p>referencing artefacts from elsewhere;</p>
</li>
<li>
<p>deal with transfer and forking;</p>
</li>
<li>
<p>supporting integrity and non-repudiation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Unless otherwise stated, in this document, the term 'artefact' refers specifically to these artefact types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_related_documents">1.2. Related Documents</h3>
<div class="paragraph">
<p>Prerequisite documents for reading this document include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The openEHR Architecture Overview (<a href="#openehr_overview">[openehr_overview]</a>).</p>
</li>
<li>
<p>The openEHR Archetypes Technical Overview (<a href="#openehr_am_overview">[openehr_am_overview]</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related documents include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Archetype Object Model (AOM2) (<a href="#openehr_am_aom">[openehr_am_aom]</a>).</p>
</li>
<li>
<p>The Archetype Description Language (ADL2) (<a href="#openehr_am_adl">[openehr_am_adl]</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_status">1.3. Status</h3>
<div class="paragraph">
<p>This specification is in the Development state. The development version of this document can be found at <a href="http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf</a>.</p>
</div>
<div class="paragraph">
<p>Known omissions or questions are indicated in the text with a 'to be determined' paragraph, as follows:</p>
</div>
<div class="paragraph tbd">
<p><strong>TBD</strong>: (example To Be Determined paragraph)</p>
</div>
<div class="paragraph">
<p>Users are encouraged to comment on and/or advise on these paragraphs as well as the main content.  Feedback should be provided either on the <a href="http://lists.openehr.org/mailman/listinfo/openehr-technical_lists.openehr.org">technical mailing list</a>, or on the <a href="https://openehr.atlassian.net/browse/SPECPR/?selectedTab=com.atlassian.jira.jira-projects-plugin:issues-panel">specifications issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_tools">1.4. Tools</h3>
<div class="paragraph">
<p>Various tools exist for creating and processing archetypes. The <a href="http://www.openehr.org/downloads/ADLworkbench/home">ADL Workbench</a> is a reference compiler, visualiser and editor. The openEHR tools can be <a href="http://www.openehr.org/downloads/modellingtools">downloaded from the website</a>. Source projects can be found at the <a href="https://github.com/openEHR">openEHR Github project</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">2. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_the_environment">2.1. The Environment</h3>
<div class="paragraph">
<p>This specification is designed to address the need for reliable identification and referencing of complex knowledge artefacts within a distributed authoring and consumption environment. The figure below establishes the key concepts and nomenclature assumed by this specification. The focus of interest is ‘artefacts’, including archetypes, templates (of the archetype variety), terminology subsets/ref-sets, query sets, and potentially things such as computable guidelines.</p>
</div>
<div id="distributed_development_environment" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/distributed_development_environment.png" alt="distributed development environment" width="70%">
</div>
<div class="title">Figure 1. Distributed Development Environment</div>
</div>
<div class="paragraph">
<p>Artefacts are assumed to be produced by tools, either in an unmanaged way, or in a situation in which users are connected to an artefact Custodian Organisation (CO). Such an organisation is assumed to have a Repository (which stores and manages artefacts), and potentially a Registry (in which meta-data about artefacts is stored) and Classification (a semantic index on Artefacts, typically achieved via the use of one or more ontologies). A Custodian Organisation could be international, country level, or be owned by a company or other organisation.</p>
</div>
<div class="paragraph">
<p>Most COs will tend to develop artefacts based on those published by ‘higher-level’ (i.e. national, international) COs. To enable this, a logical ability to re-use specified releases of artefacts from ‘upstream’ COs by ‘downstream’ COs is assumed. This usually implies some kind of virtual inclusion (e.g. from one web-visible repository to another), or it may be implemented by copying and marking as read-only the received artefacts. Regardless of the particular implementation, the ‘logical contents’ of a repository is the totality of localy managed artefacts, plus all virtually referenced artefact libraries. This is necessary to enable most compiler-like tools to function normally.</p>
</div>
<div class="paragraph">
<p>It is assumed that Artefacts can also move between COs for purposes of transfer, or due to ‘forking’ (i.e. splitting of a line of development, as with software). Artefacts are published in some form and consumer by User Enterprises which deploy the artefacts in some technical infrastructure.</p>
</div>
<div class="paragraph">
<p>Artefacts are ultimately consumed by User Enterprises, normally in a validated and compiled form.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_problem">2.2. The Problem</h3>
<div class="paragraph">
<p>The problem specifically addressed by this specification is that of identification and referencing of knowledge artefacts. The notion of ‘identification’ for such artefacts incorporates a number of key requirements. The kinds of models in scope include archetypes (<a href="#openehr_am_aom">[openehr_am_aom]</a>, <a href="#openehr_am_adl">[openehr_am_adl]</a>), templates (<a href="#openehr_am_templates">[openehr_am_templates]</a>), terminology subsets (See e.g. <a href="#IHTSDO">[IHTSDO]</a>), clinical guidelines, query sets and other non-atomic domain level definitions of content, rules, workflows and other semantics. The common aspects of artefacts within this scope is that they are ‘outside the software’, and that they are independent of specific implementation technologies. Examples include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an archetype for ‘blood gases’;</p>
</li>
<li>
<p>a template for ‘discharge summary’;</p>
</li>
<li>
<p>a SNOMED CT subset for ‘parasitic infection’.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Out of scope are the atomic ‘concepts’ and ‘categories’ commonly found in terminologies (e.g.: ICD10, SNOMED CT, LOINC) and ontologies (e.g. the BFO ontologies such as OGMS, FMA, IAO etc <a href="#BFO">[BFO]</a>, <a href="#OGMS">[OGMS]</a>, <a href="#FMA">[FMA]</a>, <a href="#IAO">[IAO]</a>).</p>
</div>
<div class="paragraph">
<p>Extensive experience with such artefacts in the health domain has shown that while there are many similarities to software artefact identification, there are sufficient differences to warrant an explicit scheme. The health domain is the primary domain of experience assumed here, but the principles are applicable to any domain.</p>
</div>
<div class="paragraph">
<p>The key requirements addressed here are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>identify and distinguish versions, variants and releases of ‘source’ artefacts within and from <em>authoring</em> environments;</p>
</li>
<li>
<p>define rules for expressing and resolving <em>references</em> between source artefacts, including version variants;</p>
</li>
<li>
<p>define rules for identification of compiled / operational artefacts;</p>
</li>
<li>
<p>define rules for evolving identifiers (including version) of artefacts over time, based on a ‘standard’ lifecycle for artefacts;</p>
</li>
<li>
<p>define rules for identification when artefacts are retired, moved or ‘forked’.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_human_readable_and_machine_identifiers">2.3. Human-readable and Machine Identifiers</h3>
<div class="paragraph">
<p>There are two general approaches to identification. The first is the one used in software and ontology development: human-readable identifiers, denoted in this specification as HRIDs. Under this approach, identifiers name an artefact (e.g. a class in object-oriented software, category in an ontology) and can be used as references to connect similar artefacts in a hierarchy (e.g. according to the inheritance relationship). The second is the use of meaningless machine identifiers (more properly denoted ‘machine-readable’ or ‘machine-resolvable’ identifiers) such as GUIDs and ISO OIDs with accompanying de-referencing mechanisms. The two approaches are not mutually exclusive, nor are they equivalent.</p>
</div>
<div class="paragraph">
<p>A human-readable identification scheme supports the notion of a specialsiation / subsumption hierarchy of artefacts (‘inheritance’ in object programming), multi-dimensional concept spaces, flexible versioning, and formally reflects the artefact authors' and users' understanding of the concept space being modelled. Human-readable identification supports many types of computational processing. A typical software HRID is the class name <code>FastSortedList</code> . Within the software world, HRIDs are used for both source artefacts and built components such as libraries and executables, although the details of the respective types of identifier may differ.</p>
</div>
<div class="paragraph">
<p>One crucial feature of most human-readable identifiers is that they <em>may change after initial assignment</em>, for reasons of change of purpose, improved understanding of need, or external requirements change. These kinds of changes are normally limited to the early development (typically pre v1.0 phase) period in order to enable stability later on.</p>
</div>
<div class="paragraph">
<p>Machine identifiers on the other hand are not human-readable, typically do not directly support versioning (unless specifically designed to do so, usually via the use of tuples of atomic identifiers), but do enable various useful kinds of computation. They require mapping to convert to human-readable identifiers. Unlike human-readable identifiers, machine identifiers do not normally change once assigned.</p>
</div>
<div class="paragraph">
<p>One key question when using machine identifiers is: what do the identify? A logical artefact, which may exist in several minor and major versions? Each minor version? Each textually different variant that is committed to a repository? For each of these, a scheme has to be devised that correctly identifies the thing to be tracked.</p>
</div>
<div class="paragraph">
<p>It is possible to define an identification scheme in which either or both human-readable and machine identifiers are used. In schemes where machine identification alone is used, all human artefact 'identification' is relegated to meta-data description, such as names, purpose, and so on. One problem with such schemes is that meta-data characteristics are informal, and therefore can clash – preventing any formalisation of the ontological space occupied by the artefacts. Discovery of overlaps and in fact any comparative feature of artefacts cannot be easily formalised, and therefore cannot be made properly computable.</p>
</div>
<div class="paragraph">
<p>The approach assumed here is to use both types of identifier in the following way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a Guid is assigned to a knowledge artefact when it is created. It does not change, no matter what changes are made to the definition of the artefact. This enables authoring and model repository tools to track artefacts as they are modified over time.</p>
</li>
<li>
<p>one or more namespaced HRIDs for an artefact can be computed from various properties of the artefact. Which properties will depend on the type of artefact.</p>
</li>
<li>
<p>the last committed ‘build’ of an artefact (i.e. most recent version containing a change, no matter how small) can be identified in two ways:</p>
</li>
<li>
<p>using a ‘build’ number that is part of the version identification of the artefact;</p>
</li>
<li>
<p>via a hash on a canonical serialisation of the artefact.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is a departure from the common situation where no machine identifier is assigned, and the artefact HRID is a static string, rather like a source file filename.</p>
</div>
</div>
<div class="sect2">
<h3 id="_meta_data">2.4. Meta-data</h3>
<div class="paragraph">
<p>A solution for identification that includes human readable (formal) identifiers unavoidably implicates the ‘meta-data’ of the identified artefacts, since such identifiers are normally created from smaller items such as ‘reference model class’, ‘version’, ‘namespace’ and so on. However, some items of meta-data are not appropriate for inclusion in an artefact, and would be created in the Registry instead. A general rule is that this applies to any item of information that may change without affecting the semantics of the artefact, and whose change should not require revision of the artefact itself. Examples of such information: ontological classification(s); ‘ownership’ status.</p>
</div>
<div class="paragraph">
<p>This specification assumes that an artefact management environment includes such a registry, and that some items of meta-data can be stored outside the artefacts themselves.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_source_artefact_identification">3. Source Artefact Identification</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_2">3.1. Overview</h3>
<div class="paragraph">
<p>The basis for identifying source (i.e. authored) artefacts is to define a number of separate logically identifying properties, as well as a machine identifier. One or more human-readable identifier(s) can be generated from the non-uid identifying properties. For archetypes and templates, the relevant properties are defined on the <code>ARCHETYPE_HRID</code> class from the openEHR Archetype Object Model. Related properties are inherited from the <code>AUTHORED_RESOURCE</code> classe into <code>ARCHETYPE</code> are shown, including the <code>lifecycle_state</code> property, as well as all other descriptive meta-data.</p>
</div>
<div class="paragraph">
<p>For other types of artefacts the detailed model will differ, but the principles are the same.</p>
</div>
<div class="paragraph">
<p>Three distinct groups of properties shown in the <code>ARCHETYPE_HRID</code> class that underpin the identification scheme described here, as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>namespace</code> provides a way of distinguishing logical identifiers created by different organisations that would otherwise compete in a single semantic identifier space;</p>
</li>
<li>
<p><code>rm_publisher</code>, <code>rm_closure</code>, <code>rm_class</code>, <code>concept_id</code> form the basis of the main part of a human-readable identifier, e.g. <code>openEHR-EHR-OBSERVATION.bp_measurement</code>;</p>
</li>
<li>
<p>properties supporting versioning:</p>
</li>
<li>
<p><code>release_version</code>, expressing a 3-part version identifier, e.g. '1.3.0';</p>
</li>
<li>
<p><code>build_count</code> , incremented at every commit, supporting non-release version ids, such as '1.3.0-rc.28' and ‘1.3.0-unstable’, where the build count is 28;</p>
</li>
<li>
<p><code>description</code>.<code>lifecycle_state</code>, expressing the development state of the artefact, and used to derive the ‘rc’ (release candidate) and ‘unstable’ (development) parts of non-release version ids.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Functions such as <code>interface_id</code>, <code>physical_id</code> and <code>version_id</code> are defined to return respectively the ‘interface’ and ‘physical’ archetype HRIDs (described below) as strings, and the full version string (computed from <code>release_version</code> , <code>build_count</code> and <code>description.lifecycle_state</code> ). The functions <code>major_version</code> , <code>minor_version</code> and <code>patch_version</code> extract the various parts of the 3-part <code>release_version</code> property.</p>
</div>
<div class="paragraph">
<p>The <code>uid</code> property provides the machine identifier, and is assumed to be a Guid.</p>
</div>
<div class="paragraph">
<p>Both the <code>uid</code> and <code>namespace</code> properties are optional for legacy reasons, since most existing archetypes have neither. The interpretation of an artefact without these identifiers in this specification is that it is <em>unmanaged</em> , i.e. it has no recognised owner organisation. During a period of changeover to the identifiers specified here, there will clearly be artefacts that are in fact managed, and which need to have the <code>uid</code> and <code>namespace</code> properties assigned. This will obviously take some time, as it requires support from the tooling ecosystem.</p>
</div>
<div class="paragraph">
<p>Different types of human-readable identifiers are used for archetypes, templates and terminology subsets. The following sections describe the formal details of this identification scheme, and how it supports referencing between artefacts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_formal_model">3.2. Formal Model</h3>
<div class="paragraph">
<p>This section defines a formal grammar for human-readable indentifiers of knowledge artefacts. As described above, more than one human-readable identifier can be constructed from the identifying properties of the <code>ARCHETYPE_HRID</code> class. The grammar is shown in green below.</p>
</div>
<div class="paragraph">
<p>The highest level distinction is between managed and unmanaged artefacts, with managed status being indicated by the prepending of a namespace to what can be termed a ‘local’ HRID (i.e. local to a given namespace context).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    artefact_hrid:          namespaced_hrid | local_hrid
    namespaced_hrid:        namespace '::' local_hrid
    local_hrid:             hrid_root '.v' version_id
    namespace:              V_REVERSE_DOMAIN_NAME
    V_REVERSE_DOMAIN_NAME:  # See IETF RFCs 1035, 123, and 2181.</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>namespace</code> above is the publisher organisation reverse domain name. Reverse domain names are used in order to aid lexical sorting of identifiers and also tools that build directory structures based on reverse domain name segments. All managed artefacts, including archetypes and templates should include a namespace. Any archetype or template carriying an identifier without a namespace is assumed to be an unmanaged artefact.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.openehr</code>: EHR archetypes library at openEHR.org</p>
</li>
<li>
<p><code>uk.nhs</code>:      UK National Health Service</p>
</li>
<li>
<p><code>edu.nci</code>:     US National Cancer Institute</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_human_readable_identifier_hrid">3.2.1. Human-readable Identifier (HRID)</h4>
<div class="paragraph">
<p>The following sections describe the <code>hrid_root</code> component, i.e. the <code>hrid</code> minus the version identifier.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    hrid_root: archetype_hrid_root
            | template_hrid_root
            | subset_hrid_root
            | query_hrid_root</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_archetype_identifier">3.2.2. Archetype Identifier</h4>
<div class="paragraph">
<p>The archetype human-readable identifier consists of two logical parts: an identifier of the reference model (i.e. logical information model) class on which it is based, and an ontological identifier.</p>
</div>
<div class="paragraph">
<p>The identifier is defined by the following grammar rules, which are a slightly simplified version of the grammar for the openEHR / ISO 13606 <code>ARCHETYPE_ID</code> type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    archetype_hrid_root:            qualified_rm_class_name '.' concept_id
    qualified_rm_class_name:        rm_publisher '-' rm_closure '-' rm_class
    rm_publisher:                   V_ALPHANUMERIC_NAME
    rm_closure:                     V_ALPHANUMERIC_NAME
    rm_class:                       V_ALPHANUMERIC_NAME
    concept_id:                     V_SEGMENTED_ALPHANUMERIC_NAME

    V_ALPHANUMERIC_NAME:            [a-zA-Z][a-zA-Z0-9_]+
    V_SEGMENTED_ALPHANUMERIC_NAME:  [a-zA-Z][a-zA-Z0-9_-]+ -- allows hyphens</pre>
</div>
</div>
<div class="paragraph">
<p>The field meanings are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rm_publisher</code>: id of organisation originating the reference model on which this archetype is based;</p>
</li>
<li>
<p><code>rm_closure</code>: identifier of the reference model top-level package closure on which the archetype is based;</p>
</li>
<li>
<p><code>rm_class</code>: name of class or equivalent entity in the reference model on which the artefact is based;</p>
</li>
<li>
<p><code>concept_id</code>: an identifier from an ontology of information artefacts (see below);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first part takes the form of a 3-part identifier, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>openEHR-EHR-EVALUATION</code></p>
</li>
<li>
<p><code>ISO-ISO13606-ENTRY</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This historically has been used in openEHR and CEN/ISO 13606-2 to identify the reference model class on which an archetype is based. It includes the publisher of the reference model (e.g. "ISO", "openEHR"), which top level ‘closure’ is being referred to, and finally which class.</p>
</div>
<div class="paragraph">
<p>The notion of ‘closure’ is a top level package from which the focal class can be reached. In general, a given class can be reached from more than one top level package, but an archetype of that class will only be suitable for one of those packages. For example, the openEHR class <code>CLUSTER</code> is used by classes in both the <code>ehr</code> and <code>demographic</code> top level packages. However, an archetype of <code>CLUSTER</code> will usually be designed for use with only one of those packages. The Cluster archetype <code>physical_examination</code> for example will only make sense in data defined by the <code>ehr</code> package. Consequently, it will have an archetype identifier of the form <code>openEHR-EHR-CLUSTER</code> . <code>physical_examination</code> .</p>
</div>
<div class="paragraph">
<p>The closure part of the identifier could be used by tools to ensure for example that an ‘EHR’ <code>CLUSTER</code> archetype was never attached to a ‘demographic’ information item.</p>
</div>
<div class="sect4">
<h5 id="_concept_identifier">Concept Identifier</h5>
<div class="paragraph">
<p>The second part of the human-readable identifier is a ‘short’ ontological identifier (known in ADL 1.4 as the ‘concept’ or ‘domain concept’). Such identifiers have historically been natural language words or phrases, typically in a short mnemonic form, e.g. ‘bp_measurement’ in the archetype identifier <code>ISO-ISO13606-ENTRY.bp_measurement.v1</code> .</p>
</div>
</div>
<div class="sect4">
<h5 id="_legacy_adl_1_4_semantics">Legacy ADL 1.4 Semantics</h5>
<div class="paragraph">
<p>Historically in ADL 1.4 (ISO 13606-2:2008), the ‘concept’ part of the identifier encoded the specialisation hierarchy of concepts as a series of hyphated segments, e.g. ‘problem’ and ‘problem-diagnosis’, with the latter identifiying a specialised form of the former.The requirement for the concept name to include specialisations is removed in this specification, as well as the ADL / AOM 1.5 specifications. This enables the domain concept of any artefact to be freely assigned according to the purpose of the artefact.</p>
</div>
<div class="paragraph">
<p>To allow for the fact that legacy specialised archetypes do in fact include the '-' style of separated domain concept identifier, the '-' character is still be allowed, but no longer has any semantic significance.</p>
</div>
<div class="paragraph">
<p>One consequence is that for archetypes with identifiers conforming to this specification, the level of specialisation can no longer be determined from the identifier. This new approach is in line with how source artefacts are named in object-oriented languages.</p>
</div>
</div>
<div class="sect4">
<h5 id="_concept_identifier_semantics">Concept Identifier Semantics</h5>
<div class="paragraph">
<p>The more important aspect of the concept identifier, is its origin and semantics. Historically it has been part of the identifier for archetypes because it is human readable and facilitates debugging of systems where the data contain such identifiers. Clearly a purely ad hoc assignment of a human-readable identifier is not scalable or reliable. Consequently rules and mechanisms for assignment need to be identified.</p>
</div>
<div class="paragraph">
<p>This specification takes the point of view that the concept part of a managed knowledge artefact identifier must come from an ontology corresponding to the namespace of the identifier, in other words, an ontology maintained by a Custodian Organisation or some higher authority.</p>
</div>
<div class="paragraph">
<p>It is not the business of this specification to define the ontology, but we can indicate the general form as being an ontology of information entity types for use in the domain of health. It is assumed that there are nodes within the ontology are related to the classes from the information (i.e. ‘reference’) model. This leads to an ontology of the form shown below.</p>
</div>
<div id="info_artefact_ontology" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/information_artefact_ontology.png" alt="information artefact ontology" width="70%">
</div>
<div class="title">Figure 2. Information Artefact Ontology</div>
</div>
<div class="paragraph">
<p>This (putative) ontology consists of high-level health information recording entities (black), a set of record entry types derived from the Clinical Investigator Record ontology (<a href="#Beale_Heard_2007">[Beale_Heard_2007]</a>), and domain-specific entities in blue. It is assumed that the top node(s) of the ontology could be related to nodes in a published ontology such as the Information Artefact Ontology (<a href="#IAO">[IAO]</a>), but this is not a pre-requisite for establishing this ontology. More ideally, its categories would be related to categories in the Basic Formal Ontology (<a href="#BFO">[BFO]</a>).</p>
</div>
<div class="paragraph">
<p>The blue node <code>measurement_of_systemic_arterial_blood_pressure</code> (bottom left) describes an entity corresponding to a ‘record of systemic arterial blood pressure measurement’. Long names such as this are standard in the ontology community, and are designed to ensure that the name of a category is sufficient to unamiguously define its meaning. Such names are typically too long and unwieldy for the purposes of managable lexical identifiers such as for archetypes.</p>
</div>
<div class="paragraph">
<p>We therefore assume that a system of ‘short identifiers’ is possible within the ontology, where a ‘short id’ is a synonym for a full node identifier. If we further assume that the ontology is constructed with tools (e.g. Protege <a href="#Protege">[Protege]</a>) and that ontology identifiers are checked to ensure uniqueness.</p>
</div>
<div class="paragraph">
<p>Facilities to manage such ontologies should be available either centrally (e.g. openEHR.org or at The Open Biological and Biomedical Ontologies <a href="#OBO">[OBO]</a>), so that every added archetype, template or subset is assigned a short ontological identifier from the ontology.</p>
</div>
<div class="paragraph">
<p>Existing archetypes can be accommodated within such ontologies in two possible ways. If they have been in use, and data exist containing these identifiers, then their current ontological identifiers can be proposed as the short id for an ontology class defined for the archetype. If there is a clash, a new archetype concept short identifier will be needed, and the archetype will need to be republished under a different identifier.</p>
</div>
</div>
<div class="sect4">
<h5 id="_need_for_rm_class_name_in_identifier">Need for RM Class Name in Identifier</h5>
<div class="paragraph">
<p>Theoretically, the Reference Model class identifier part (qualified_rm_class_name above) should not be needed in a well constructed identifier, on the basis that there should never be a clash of concept identifiers, regardless of the RM class, even though they can easily be similar. For example, a reasonable <code>concept_id</code> for an <code>ENTRY</code> (ISO 13606) or <code>OBSERVATION</code> (openEHR) structure archetyped to represent a generic lab result result might be ‘lab_result’. For the COMPOSITION-level archetype designed to contain any ‘lab result’ <code>ENTRY</code> or <code>OBSERVATION</code>, a reasonable name would typically be ‘lab_report’ (or the equivalent in another language).</p>
</div>
<div class="paragraph">
<p>Unfortunately, for some informational concepts, the appropriate name for the actual core data level can appear to be perfectly reasonable also as a name for a higher level container of the same data. Without an efficient and essentially global ontology construction service or authority available, the inclusion of the qualified RM class name acts as a reasonable guard against such clashes.</p>
</div>
<div class="paragraph">
<p>If in the future a capability becomes widely available for efficiently defining ontology concept identifiers for archetypes, the archetype identifier could be reduced to a purely namespaced and versioned ontology identifier. Such an identifier would resemble the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    org.cimi::chem7_panel_result.v2.0.4</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_template_identifier">3.2.3. Template Identifier</h4>
<div class="paragraph">
<p>Within a given publishing space, template human-readable identifiers are defined the same way as archetype identifiers, i.e.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    template_hrid_root: qualified_rm_class_name '.' domain_concept</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_terminology_subset_identifier">3.2.4. Terminology Subset Identifier</h4>
<div class="paragraph">
<p>Terminology subsets (aka ‘ref-sets’, i.e. ‘intentional reference sets’ as defined by IHTSDO) are a relatively new type of artefact. The key requirement is that a system of terminology subset identifiers accommodates multiple any terminology, regardless of its coding system, publisher or internal design.</p>
</div>
<div class="paragraph">
<p>A possible proposal for a subset identifier is to use the ontology approach above, within a larger identifier constructed as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    subset_hrid_root:               qualified_terminology_id '.' concept_id
    qualified_terminology_id:       terminology_originator '-' terminology_name
    terminology_originator:         V_DOMAIN_NAME
    terminology_name:               V_ALPHANUMERIC_NAME</pre>
</div>
</div>
<div class="paragraph">
<p>This would lead to identifiers like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    org.ihtsdo-snomed_ct.blood_phenotype.v2     -- Snomed Blood type subset
    int.who-icd10.bacterial_infections.v13      -- ICD10 bacterial infections subset</pre>
</div>
</div>
<div class="paragraph">
<p>In the above, the concept_id is a short form of an ontological identifier for the ref-set or value set.</p>
</div>
</div>
<div class="sect3">
<h4 id="_query_set_identifier">3.2.5. Query Set Identifier</h4>
<div class="paragraph">
<p>There has been little experience with identification of query sets as a design artefact, mainly because queries in most systems are written in SQL and are not portable to any other system, being based on the local database structure.</p>
</div>
<div class="paragraph">
<p>Archetype-based queries, written in AQL or a similar formalism are portable across systems, and therefore do not need to be re-designed for each environment. Their identification is therefore likely to be of far greater importance than that of non-portable queries.</p>
</div>
<div class="paragraph tbd">
<p><em>TBD</em>:  human-readable id for queries</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_versioning">3.3. Versioning</h3>
<div class="sect3">
<h4 id="_general_model">3.3.1. General Model</h4>
<div class="paragraph">
<p>Unlike software artefacts in most modern versioning systems, knowledge artefacts are <em>individually</em> version-controlled. This is because an archetype, template or terminology subset is, in and of itself, a potentially complex structure of data points / groups and / or terminology codes and relationships. It can in general be used on its own or with a small number of related artefacts (e.g. specialisation parents). Therefore, the version identification system applies to <em>each source artefact</em>, rather than an entire repository in the manner of typical software versioning.</p>
</div>
<div class="paragraph">
<p>This has a very visible effect: it means that every ‘committed’ change to an artefact is like a release, whereas with software, numerous changes to source files typically occur between releases. Additionally, each artefact revision is <em>distinguished by its version identifier</em> for the purpose of change tracking in a repository environment, whereas with software source artefacts, the logical ‘name’ of each entity (e.g. a class called ‘LinkedList’) within the source repository doesn’t change, even though its contents do. To summarise:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>software versioning is performed by successive snapshots of a repository, and releasing is performed by assigning a version identifier to some of the snapshots;</p>
</li>
<li>
<p>for knowledge artefacts being described here, versioning occurs <em>independently</em> for each artefact, and ‘releasing’ is simply an act of publishing the artefact;</p>
</li>
<li>
<p>for knowledge artefacts, the versioned human-readable identifier is or can be used computationally, e.g. in queries and artefact references, whereas a software release identifier is not generally computed on by the software itself.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_version_numbering">3.3.2. Version Numbering</h4>
<div class="paragraph">
<p>Despite the above differences, the numbering of versions of knowledge artefacts follows the rules for identifying software releases described by <a href="#semver.org">[semver.org]</a>.</p>
</div>
<div class="paragraph">
<p>Accordingly, version identifiers are based on three levels of ‘versioning’, identified by dot-separated numeric parts, with an optional extension related to the artefact lifecycle, described below. The numeric parts are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>major version</strong> - must be incremented with a breaking change to the artefact formal definition; may be incremented with a lesser change;</p>
</li>
<li>
<p><strong>minor version</strong> - must be incremented with a non-breaking change to the artefact formal definition; may be incremented with a lesser change;</p>
</li>
<li>
<p><strong>patch version</strong> - must be incremented with a change to the informal parts of the artefact;</p>
</li>
<li>
<p><strong>build number</strong> - a number that is incremented every time an artefact is committed, and is reset to 1 whenever the version id is changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the above, the ‘formal definition’ refers to the following parts of an archetype or template only:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier section;</p>
</li>
<li>
<p>the <code>specialize</code> clause;</p>
</li>
<li>
<p>the <code>definition</code> section;</p>
</li>
<li>
<p>within the <code>terminology</code> section:</p>
</li>
<li>
<p>the <code>text</code> short names of the terms in the <code>term_definitions</code> section (i.e. not the description long text or other meta-data);</p>
</li>
<li>
<p>the <code>term_bindings</code> section;</p>
</li>
<li>
<p>the <code>value_set</code> section.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Lexically, the version identifier is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    version_id:             release_version [extension]
    release_version:        major_version '.' minor_version '.' patch_version
    major_version:          {V_NUMBER}+
    minor_version:          {V_NUMBER}+
    patch_version:          {V_NUMBER}+
    extension:              version_modifier instance_uid_slice
    version_modifier:       '-rc' | '-unstable'
    instance_uid_slice:     {V_UID_DIGIT}(5,) -- 5 or more digits from instance_uid
    V_NUMBER:               [0-9]+
    V_UID_DIGIT:            [0-9A-Fa-f]</pre>
</div>
</div>
<div class="paragraph">
<p>This leads to identifiers such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    1.3.5
    1.3.5-rc.3              # release candidate for version 1.3.5, build id 3
    1.3.5-unstable          # unstable development version based on version 1.3.5</pre>
</div>
</div>
<div class="paragraph">
<p>The following general rules are required for using version identifiers.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>First version rule</strong>: the first version (i.e. version on creation) of an artefact is a <code>v0</code> version, i.e. <code>0.N.P</code>. Usually it is <code>0.0.1</code>, but may be a higher <code>v0</code> version to indicate maturity. The discussion of lifecycle and distributed semantics below provide more details on the initial version semantics.</p>
</li>
<li>
<p><strong>Incrementing rule</strong>: when generating a release version (i.e. not a candidate or unstable version), when the major version is incremented, the minor and patch version numbers are reset to 0; when the minor version is incremented, the path number is reset to 0.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More specific rules relating to specific lifecycle states are described below.</p>
</div>
<div class="paragraph">
<p>Two ‘variant’ versions are defined in the above syntax: ‘release candidate’ and ‘unstable’. The first is a standard software classification, syntactically indicated with the tag <code>rc</code>. Version numbers including <code>rc</code> are always of the form <code>M.N.P-rc.B</code>, e.g. <code>1.3.5-rc.1</code>, where the minus sign (<code>-</code>) is understood as indicating a version that is ‘less than’ the target version <code>1.3.5</code>, i.e. <code>1.3.5-rc.1</code> is an interim version leading to the stable version 1.3.5.</p>
</div>
<div class="paragraph">
<p>The other variant is indicated with the modifier <code>-unstable</code>, where <code>-</code> indicates a version ‘before’ the version identified by the preceding numeric identifier, and <code>unstable</code> indicates an ‘unstable’ development version. The magnitude of the differences a <code>-unstable</code> version are indicated by the difference between the 3-part version identifiers of the current artefact and the previously published one on which it is based.</p>
</div>
<div class="paragraph">
<p>Note that only the major version forms part of the source artefact human-readable identifier. The intention of that is that a breaking change causes a new artefact from the point of view of deployment. This is analagous to breaking changes in software interfaces, web service defintions etc, being seen as a distinct entity, typically deployed alongside the old version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_change_semantics">3.3.3. Change Semantics</h4>
<div class="paragraph">
<p>The <a href="#semver.org">[semver.org]</a> model is designed for software, and is based on the concept of the software interface, or ‘public API’. For the the artefact types within the scope of this specification, the concept of ‘interface’ is interpreted as being the .</p>
</div>
<div class="paragraph">
<p>A ‘breaking change’ for knowledge artefacts in the scope of this specification is defined as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for archetypes and templates, any change that prevents data created by the previous release of the artefact validating against the new release.</p>
</li>
<li>
<p>for terminology subsets, any change that causes coded data to no longer be found in the relevant subset in the owning model (i.e. archetype or template).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Examples of breaking changes are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>removal of mandatory data points or groups;</p>
</li>
<li>
<p>move of data points to different sub-tree.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any such change necessarily requires a new major version. The logical consequence of these rules is that non-breaking (minor version) changes can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>constraints redefined to be ‘wider’ (i.e. old constraint subsumed by new constraint);</p>
</li>
<li>
<p>additional model nodes (i.e. extensions).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This has the important side-effect that minor versions of a given major version may have additional semantics comared to the original major version (i.e, minor version 0) and any other intervening minor version. In other words, <strong>specifying a major version in general may not be sufficient to designate all of the ‘interface’ available</strong> in the latest minor version. Therefore, for purposes of referencing an artefact with the expectation that the reference will designate specific elements, at least a minor version may be needed. This is discussed further in the <a href="#_referencing">Referencing</a> section.</p>
</div>
<div class="paragraph">
<p>Note that there is no assumption that a change of a given technical level (i.e. as evaluated by a diff tool) will be seen equivalently by domain experts. For example a minor change that only requires the patch version to be incremented might have major implications for clinical semantics. For this reason, the version identifier may be incremented beyond the minimum level required by a mechanical comparison.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lifecycle_model">4. Lifecycle Model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_conceptual_model">4.1. Conceptual Model</h3>
<div class="paragraph">
<p>As with software, knowledge artefacts follow a lifecycle with identified states, representable by a state diagram. A traversal through the state diagram corresponds to the development of changes to an artefact leading to a release of a specific version.</p>
</div>
<div class="paragraph">
<p>Although somewhat peripheral to the scope of artefact identification, we describe a ‘de facto’ lifecycle for three reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to provide at least one lifecycle definition for users who have no other definition available;</p>
</li>
<li>
<p>to provide explicit terminology for states and transitions for use in this and other specifications;</p>
</li>
<li>
<p>to concretise the relationship between versioning and state transitions that commonly occur in software and other formal artefact development.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The lifecycle defined here is shown below.</p>
</div>
<div id="development_lifecycle" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/development_lifecycle.png" alt="development lifecycle" width="80%">
</div>
<div class="title">Figure 3. Development Lifecycle</div>
</div>
<div class="paragraph">
<p>A multi-level model is used, where some states have ‘micro-states’, and top-level states are known as ‘macro-states’. The intention is to provide standard names for all macro-states, while suggesting and allowing micro-states where they make sense. Macro-state names are the basis for software version identification - ‘development’ corresponds to the <code>-unstable</code> variant, release_candidate to the <code>-rc</code> variant. Micro-states are useful to indicate because they define names for finer-grain states typically supported in artefact repositories.</p>
</div>
<div class="paragraph">
<p>This lifecycle assumes that artefacts start life either in an ‘unmanaged’ environment or directly in a managed one. In the latter case, it is assumed that there is some distinction between the developers’ view and the ‘release’ view.</p>
</div>
<div class="paragraph">
<p>The key states are defined with names (dark blue) and transitions (light blue) that correspond to typical software and document development terms. Typical traversals through the lifecycle are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>[ <code>unmanaged</code> &#8594; ] <code>development</code> &#8594; <code>published</code></p>
</li>
<li>
<p><code>development</code> &#8230;&#8203; <code>development</code> &#8594; <code>release_candidate</code> &#8594; &#8230;&#8203; <code>release_candidate</code> &#8658; <code>published</code></p>
</li>
<li>
<p><code>published</code> &#8594; <code>deprecated</code></p>
</li>
<li>
<p><code>development</code> &#8594; <code>rejected</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A few linguistic conventions used here are worth noting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start_review</code> is the name of all actions entering the <code>development</code> macro-state;</p>
</li>
<li>
<p><code>release</code> as an action (i.e. state transition) is taken to mean making any version of an artefact available to the public user base, including pre-releases, final releases and post-releases (‘builds’ in <a href="#semver.org">[semver.org]</a> parlance);</p>
</li>
<li>
<p><code>publish</code> as an action means to make a definitive release.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_lifecycle_based_versioning">4.2. Lifecycle-based Versioning</h3>
<div class="paragraph">
<p>The correspondence of versioned human-readable identifier and lifecycle states can now be described, according to the illustration below.</p>
</div>
<div id="development_lifecycle_with_versioning" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/development_lifecycle_with_versioning.png" alt="development lifecycle with versioning" width="80%">
</div>
<div class="title">Figure 4. Development Lifecycle with Versioning</div>
</div>
<div class="paragraph">
<p>The version identifier evolves according to the general rules described above, and specific rules related to the lifecycle states, as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An artefact normally starts life at <code>0.0.1</code>, although it is acceptable practice to start at some other v0 version e.g. <code>0.5.0</code> to indicate approximately how mature the artefact is. It remains as a <code>v0</code> version for a period of unstable early development leading to an initial releasable <code>1.x</code> version.</p>
</li>
<li>
<p>At some point, the artefact will be uploaded to a managed repository, at which point its identifier will be prepended with the management organisation namespace (and may change in other ways).</p>
</li>
<li>
<p>During active development, an artefact is considered to be unstable, i.e. any kind of changes may be made, reversed, redone and so on; due to this, the version id is formed from next version number that corresponds to the magnitude of the changes currently in the artefact, and appended with <code>-unstable</code>;</p>
</li>
<li>
<p>An artefact may be rejected, in which case its minor version is incremented (following the <a href="#semver.org">[semver.org]</a> rules), and the artefact lifecycle state is set to <code>rejected</code>.</p>
</li>
<li>
<p>At some point, the authoring team of an artefact will decide the artefact is ready for release. Its release version id is then calculated as a function of the difference between the current form and the base version on which it is based.</p>
</li>
<li>
<p>It is then either:</p>
<div class="ulist">
<ul>
<li>
<p>published into a pre-release cycle, at which point the numerical part of the version is computed according to the difference between the current form of the artefact and the release version on which it is based. The form of the identifer becomes <code>M.N.P-rc.B</code>, which indicates a community testing phase. From the <code>release_candidate</code> state, three paths are possible:</p>
<div class="ulist">
<ul>
<li>
<p>publish definitively with a stable version id of the form <code>M.N.P</code>;</p>
</li>
<li>
<p>release a newer release candidate, containing only changes that do not break the interface, i.e. patch-level changes or less; update the instance UID in any case;</p>
</li>
<li>
<p>if larger changes are needed, go back into the <code>development</code> state and perform larger changes as needed;</p>
</li>
</ul>
</div>
</li>
<li>
<p>released directly to a stable version of the form <code>M.N.P</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>An artefact may eventually be deprecated, in which case its minor version is incremented (following the <a href="#semver.org">[semver.org]</a> rules), and the artefact lifecycle state is set to 'deprecated'. It may be classified inside the repository registry as <code>obsolete</code>, <code>suspended</code> or in some other way.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>According to the basic version rules and the lifecycle model above, the ‘precedence’ of version identifiers follows is exemplified by the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    1.2.3-rc.1 &lt; 1.2.3-rc.2 &lt; 1.2.3 &lt; 1.2.4-unstable &lt; 1.3.0-unstable &lt; ... &lt; 1.3.0</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_change_scenarios">4.3. Change Scenarios</h3>
<div class="sect3">
<h4 id="_change_to_definition">4.3.1. Change to Definition</h4>

</div>
<div class="sect3">
<h4 id="_change_to_terminology_definition">4.3.2. Change to Terminology Definition</h4>

</div>
<div class="sect3">
<h4 id="_addition_of_terminology_translation">4.3.3. Addition of Terminology Translation</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_distributed_governance">5. Distributed Governance</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3">5.1. Overview</h3>
<div class="paragraph">
<p>This section deals with how knowledge artefact identifiers are managed in the distributed environment illustrated in the <a href="#distributed_development_environment">Distributed Development Environment</a> figure. Rules are needed to define how identifiers are managed in the event of an artefact coming under management, as well as transfers and forking of managed artefacts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_management">5.2. Management</h3>
<div class="paragraph">
<p>Many knowledge artefacts start life in an ad hoc way, created by a research project or expert individual. From the point of view of this specification, they are initially ‘umanaged’, meaning they have no custodial organisation.</p>
</div>
<div class="paragraph">
<p>The first step to making an artefact widely visible, and usable to the outside world is to bring it under management of an organisation that follows rules of governance and quality assurance on which the outside world can rely. This specification does not describe all these rules, just the rules for identification and meta-data of artefacts coming under management.</p>
</div>
<div class="paragraph">
<p>When an artefact is first created, its lifecycle state is ‘unmanaged’ and its version identifier is <code>v0.N.P</code>, i.e. a ‘pre- v1’ version, generally recognised (e.g. by the Github Semantic Versioning guidelines (<a href="#sem_ver">[sem_ver]</a>) as being an unstable form of the artefact that makes no promises with respect to the normal major/minor/patch versioning rules. The artefact may be given a Guid by tooling, although this will be ignored by a management organisation due to the fact that Guids assigned by ad hoc tools or direct human authoring are often copies of existing Guids (due to cut and paste) or are unreliable in some other way (improper Guid algorithm implementation).</p>
</div>
<div class="paragraph">
<p>When an artefact is accepted by a Custodian Organisation, the following things happen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>its lifecycle state progresses to <code>initial</code>;</p>
</li>
<li>
<p>its human-readable identifier is changed to the namespaced form;</p>
</li>
<li>
<p>it is assigned a newly generated Guid as its uid;</p>
</li>
<li>
<p>if its major version number is higher than 0 it is reset to <code>0.0.1</code>, otherwise it is left unchanged;</p>
</li>
<li>
<p>various meta-data items are set, including copyright, license.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, a SHA-1 hash may be generated for the artefact, which is stored within the repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transfer_and_forking">5.3. Transfer and Forking</h3>
<div class="paragraph">
<p>Once an artefact is under management, it evolves according to the lifecycle described earlier in this specification. Most of these steps and transitions can be considered ‘details of development’. However, when an artefact is deployed, data will be created containing the artefact identifiers, and from this point, the ability to link data to the generating artefacts reliably is the critical issue. The standard approach to this is described in the next section.</p>
</div>
<div class="paragraph">
<p>Challenges in data / artefact identification arise from the transfer and/or ‘forking’ of artefacts among Custodian Organisations. Artefacts can have two possible roles in a management organisation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as actively developed and maintained artefacts;</p>
</li>
<li>
<p>as deployment artefacts.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A Custodian Organisation may decide to cease its own maintenance of an artefact, and transfer that responsibility to another organisation, e.g. a national level CO. Usually it will continue to use the current local form of the artefact in its current deployment contexts, e.g. by local hospital systems or vendors.</p>
</div>
<div class="paragraph">
<p>At the moment of acquisition by the new CO, the artefact’s HRID would potentially be re-assigned.</p>
</div>
<div class="paragraph">
<p>At some point the new custodian will perform maintenance work on the artefact, for example releasing a new minor or patch-level version. If such new releases are considered national standards, the <em>original</em> CO will most likely adopt them for use. The question is: how are the new releases of the artefact identified?</p>
</div>
<div class="paragraph">
<p>With respect to the human-readable identifier, two strategies are available: retain the original human-readable identifier, or change it to reflect the new CO. An argument against changing it is that identifier continuity would be preserved, ensuring that archetype references in extant queries and in data, as well as in other archetypes and templates remain valid. If it is assumed that all such references are limited to the original management domain, the size of this problem is known and most likely containable.</p>
</div>
<div class="paragraph">
<p>Arguments for changing the identifier include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a requirement of the new Custodian Organisation to be identified in the artefact; this may be a global expectation of industry as well, e.g. if the new manager is a national organisation, it will clearly be easier for vendors and system managers if the artefacts it releases carry its identifier;</p>
</li>
<li>
<p>the possibility that the original domain continues to create new local releases, perhaps in response to problems experienced locally that require unavoidable locally specific changes;</p>
</li>
<li>
<p>the new CO wants to rename the artefact to fit in better with its own ontological artefact classification;</p>
</li>
<li>
<p>if no data or queries have ever been created using the artefact in question, changing its identifier will have no concrete impact anyway;</p>
</li>
<li>
<p>if the namespace always reflects the current CO, it will be easier to know who to contact for support and other purposes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second of these points constitutes a ‘fork’ in software terms, i.e. one line of development becomes two. Common sense would seem to dictate that the likelihood of forking, particularly due to the unforeseen need of dealing with local problems after an artefact has been promoted to a higher management domain, will never be zero, and that it may even be frequent.</p>
</div>
<div class="paragraph">
<p>It also seems reasonable to assume that even if there were no rule or obligation to change the identifier of an artefact when it migrates from one manager to another, that it will occur by mutual consent in some situations anyway.</p>
</div>
<div class="paragraph">
<p>The approach of this specification is therefore that rules must be provided that define how artefact re-identification can be effected, without actually requiring it to be done in any particular situation. Part of the requirement is to establish a machine processable concept of ‘artefact equivalence’.</p>
</div>
<div class="paragraph">
<p>Rules for migration are required for both the human-readable identifier and the machine identifier. With respect to the human-readable identifier, any of the following are assumed to be mutable:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>namespace</code>: at a minimum this will always change;</p>
</li>
<li>
<p><code>concept_id</code>: the ontological identifier may or may not change, depending on whether the new manager wishes to locate the artefact in a different ontology;</p>
</li>
<li>
<p><em>version identifier</em>: the version identifier will in general change, possibly as a function of whether the concept part of the identifier changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The general case is that the transfer of an artefact to another management organisation may result in an identifier that changes in all aspects apart from the reference model related parts of the identifier, which cannot change for formal reasons.</p>
</div>
<div class="paragraph">
<p>It is assumed here that when the human-readable identifier changes (no matter how minimally), the uid property must be changed as well. This is to prevent confusion between subsequent new versions of the original with releases of the transferred artefact. A new uid is further justified by the unavoidable ‘migration is forking’ assumption.</p>
</div>
<div class="paragraph">
<p>To enable tools to determine what archetypes are equivalent, a specific section of the artefact meta-data is proposed, which records the equivalence between the current identifier and previous ones. Assuming that an artefact could migrate more than once in its life, this section would need to accommodate multiple such statements. For purposes of helping human use of this information, it is also proposed that a date be included. The section would therefore have the logical structure of a history of equivalences, as shown in the following example for an archetype (‘hrid’ = human-readable id):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-nc">id_history</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;2001-05-27&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">old</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">hrid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.com.rbh::openEHR-EHR-EVALUATION.problem_desc.v2.4.1&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">uid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;5221C9E5-0ECA-469F-83C5-A5D5A0C6682C&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-nc">new</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">hrid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.gov.nehta::openEHR-EHR-EVALUATION.problem.v1.0.1&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">uid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;094C8B37-F0CD-45C9-A1B7-CDFDE14C67AB&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-s">&quot;2004-14-03&quot;</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">old</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">hrid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.gov.nehta::openEHR-EHR-EVALUATION.problem.v1.6.3&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">uid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;E50290BB-890A-4344-9480-D40AF01C5BCC&quot;</span><span class="tok-err">)</span>
            <span class="tok-p">&gt;</span>
            <span class="tok-nc">new</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
                <span class="tok-nc">hrid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.gov.doha::openEHR-EHR-EVALUATION.problem.v1.6.3&quot;</span><span class="tok-p">&gt;</span>
                <span class="tok-nc">uid</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;F4166F58-4EDA-4F13-B413-45A8F7A3E53D&quot;</span><span class="tok-err">)</span>
            <span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These equivalence histories would be used by Custodian Organisations to populate artefact identifier equivalence tables that could be shared on request with other manager organisations. This system is reminiscent of the CNAME record type in the internet Domain Name System (DNS), which is used to record alias domain names for canonical domain names.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referencing">6. Referencing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how artefact are referenced, by other artefacts and software. The general principal for referencing is that references based on human-readable identifiers are used between source artefacts, in the same way as for software, while references in operational forms of the artefacts or from data may be in the form of either HRIDs or machine identifiers.</p>
</div>
<div class="paragraph">
<p>A key semantic difference exists with references as opposed to identifiers. A reference is either a full physical artefact identifier, or else an identifier with partial version information. In both cases, a reference is used to match artefacts carrying full identification. In general, there can be several candidate matches, and therefore a matching algorithm has to be specified in each case, in order to ensure constant meaning for a given reference in all modelling and computing environments.</p>
</div>
<div class="paragraph">
<p>Various forms of the references based on the HRID are used, depending on the need, as described below. These are denoted as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the interface HRID reference (<code>ihrid_ref</code>), which is the same for all artefact instances sharing the same core interface, in other words, the form of the identifier including only the major version; this will match the latest relase available of that major version;</p>
</li>
<li>
<p>the specific interface HRID reference (<code>sihrid_ref</code>), which is the form of the identifier including the major and minor versions, which will match a specific release of the interface;</p>
</li>
<li>
<p>the physical HRID reference (<code>phrid_ref</code>), which identifies artefact instances which are identical; this is the form of identifier with the full version identifier included.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The grammar for this is as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    hrid_ref:               namespaced_hrid_ref | local_hrid_ref
    namespaced_hrid_ref:    namespace '::' local_hrid_ref
    local_hrid_ref:         ihrid_ref | sihrid_ref | phrid_ref
    ihrid_ref:              hrid_root '.v' major_version
    sihrid_ref:             hrid_root '.v' major_version '.' minor_version
    phrid_ref:              local_hrid</pre>
</div>
</div>
<div class="paragraph">
<p>By way of example, the following two archetype iHRID references denote different logical archetypes, from a data processing point of view, since their major versions are different, indicating a breaking change between the two:</p>
</div>
<div class="paragraph">
<p><code>org.openehr::openEHR-EHR-EVALUATION.diagnosis.<strong>v1</strong></code><br>
<code>org.openehr::openEHR-EHR-EVALUATION.diagnosis.<strong>v2</strong></code></p>
</div>
<div class="paragraph">
<p>Conversely, the following references denote physically distinct archetypes that are regarded as logically substitutable:</p>
</div>
<div class="paragraph">
<p><code>org.openehr::openEHR-EHR-EVALUATION.diagnosis.<strong>v1.1.5</strong></code><br>
<code>org.openehr::openEHR-EHR-EVALUATION.diagnosis.<strong>v1.1.7</strong></code></p>
</div>
<div class="sect2">
<h3 id="_source_artefact_references">6.1. Source Artefact References</h3>
<div class="paragraph">
<p>This section describes the scenarios and representation required for identifier-based referencing between design time ‘source’ (i.e. compiler input) artefacts.</p>
</div>
<div class="sect3">
<h4 id="_archetype_external_references_adl_aom_2">6.1.1. Archetype External References (ADL/AOM 2)</h4>
<div class="paragraph">
<p>In ADL 2, a direct archetype-archetype reference, known as an ‘external reference’ can be defined, which uses the archetype miniHRID, as shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-nc">ACTIVITY</span><span class="tok-p">[</span><span class="tok-nd">id2</span><span class="tok-p">]</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>   <span class="tok-c">-- Medication activity</span>
        <span class="tok-nc">description</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
            <span class="tok-kt">use_archetype </span><span class="tok-nc">ITEM_TREE</span> <span class="tok-p">[</span><span class="tok-nd">openEHR-EHR-ITEM_TREE.medication.v1</span><span class="tok-p">]</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If such a reference does not include a namespace, the meaning is that the same namespace as the current archetype is assumed (which may be no namespace). A namespace would be included to express a reference to an archetype outside the current namespace.</p>
</div>
<div class="paragraph">
<p>A reference such as the above will resolve to an actual archetype at runtime according to the following algorithm:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the most recent released version variant of <code>openEHR-EHR-ITEM_TREE.medication.v1</code>, i.e. the latest minor or patch version such as <code>v1.0.4</code>, <code>v1.2.49</code> etc OR</p>
</li>
<li>
<p>the latest release candidate version of <code>openEHR-EHR-ITEM_TREE.medication.v1</code>, e.g. <code>v1.2.3-rc44</code>, because ‘rc’ versions are guaranteed to be semantically compatible with their target version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because minor versions can include structural additions, it may be that in some cases, archetype external references need to be include a minor version as well - allowing an exact structual form of the archetype (interface) to be identified. Similarly For testing or other research purposes, it should probably be assumed that patch and <code>-rc</code> and <code>-alpha</code> versions of an archetype need to be referenced.</p>
</div>
<div class="paragraph">
<p>The general case is therefore assumed to be that an artefact reference is a <code>hrid_ref</code> , but most commonly an <code>ihrid_ref</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_template_references_to_archetypes_and_templates">6.1.2. Template References to Archetypes and Templates</h4>
<div class="paragraph">
<p>Templates are normally designed as pre-cursors to software artefacts, such as forms, message definitions and document schemas. Consequently, their exact contents and structure are usually carefully controlled by their developers, in the interests of stability. To achieve this, references from templates to other templates or archetypes need to be able to refer to any level of version of the target artefact. During a development phase, it may be that the template references are limited to major versions of the human-readable identifier, i.e. the <code>ihrid_ref</code> . At some point it may be the case that the minor version must be included as well. As noted above, this is because minor versions of archetypes can include structural additions, and therefore affect the structure of the final document / data-set etc. It may even be the case that patch level versions need to be identified, so as to ensure no changes whatever can occur in the template, even if upgraded versions of the source artefacts become available.</p>
</div>
<div class="paragraph">
<p>Such tight control is not however a universal requirement. A conscious design decision may have been taken that says that the resulting software artefact contents are whatever results from the template definition at the time of publishing, assuming references to major versions only.</p>
</div>
<div class="paragraph">
<p>To accommodate these scenarios, template references to archetypes and other templates need to be legal at any version level. For example, any of the following references should be legal in a template:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.openehr::openEHR-EHR-EVALUATION.problem.v2</code></p>
</li>
<li>
<p><code>org.openehr::openEHR-EHR-EVALUATION.problem.v2.4</code></p>
</li>
<li>
<p><code>org.openehr::openEHR-EHR-EVALUATION.problem.v2.4.17</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In development and research environments, it is reasonable to allow <code>-rc</code> and <code>-alpha</code> variants as well.</p>
</div>
<div class="paragraph">
<p>The general case is therefore as for archetype external references: a template reference is a <code>hrid_ref</code> .</p>
</div>
</div>
<div class="sect3">
<h4 id="_between_specialised_archetypes">6.1.3. Between Specialised Archetypes</h4>
<div class="paragraph">
<p>A specialised archetype refers to its parent using the human-readable reference, including only the major version. Two possible variants can occur:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With a non-namespaced reference. This is assumed to come from the same namespace as the specialised archetype.</p>
</li>
<li>
<p>With a namespaced identifier where the namespace is different from that of the referencing archetype. This resolves against the latest release of the referenced archetype in the locally available repository copy of the referenced namespace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following figure shows a number of archetypes related by specialisation.</p>
</div>
<div id="specialisation_relationships" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/specialisation_relationships.png" alt="specialisation relationships" width="80%">
</div>
<div class="title">Figure 5. Specialisation Relationships</div>
</div>
<div class="paragraph">
<p>One question that naturally arises to do with specialisation is what happens when the parent archetype is revised. The approach is the same as for object-oriented software: all archetypes in a given ‘check-out’ or release must always compile at any point in time to be valid. If a revised parent is introduced that invalidates any of its inheritance children, revisions must be made to the children before the repository becomes valid as a whole again. This means that a new version of an archetype in general may require child archetypes to be re-versioned as well.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_source_artefact_relationship_constraints">6.2. Source Artefact Relationship Constraints</h3>
<div class="paragraph">
<p>Related to the concept of ‘references’ is constraints that when evaluated at runtime, resolve to artefact identifiers. Two types are described here, which are the two kinds of archetype ‘slot’ definition.</p>
</div>
<div class="sect3">
<h4 id="_adl_1_4_archetype_slots">6.2.1. ADL 1.4 Archetype Slots</h4>
<div class="paragraph">
<p>In ADL 1.4, archetypes slots are defined via assertions in their slot statements. Although the specification allows for all kinds of possibilities, the only one in use is regular expressions (REs) on the archetype identifiers allowed to fill the slot. Current ADL 1.4 tooling supports REs on full (non-name-spaced) ADL 1.4 archetype identifiers, which include only the major version number, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    openEHR-EHR-EVALUATION.problem.v1</pre>
</div>
</div>
<div class="paragraph">
<p>Note that such REs often include disjoint patterns, by using the form <code>"id_pattern1|id_pattern2|id_pattern3"</code>.</p>
</div>
<div class="paragraph">
<p>A typical slot definition using REs based on such identifiers is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-nc">protocol</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
        <span class="tok-nc">ITEM_TREE</span><span class="tok-p">[</span><span class="tok-nd">at0015</span><span class="tok-p">]</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
            <span class="tok-nc">items</span> <span class="tok-kt">cardinality </span><span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-m">0..*; ordered</span><span class="tok-p">}</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
                <span class="tok-kt">allow_archetype </span><span class="tok-nc">CLUSTER</span><span class="tok-p">[</span><span class="tok-nd">id20</span><span class="tok-p">]</span> <span class="tok-kt">occurrences </span><span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-m">0..1</span><span class="tok-p">}</span> <span class="tok-o">matches </span><span class="tok-p">{</span>
                    <span class="tok-kt">include</span>
                        <span class="tok-nc">archetype_id</span><span class="tok-p">/</span><span class="tok-nc">value</span><span class="tok-p"> </span><span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-sr">/openEHR-EHR-CLUSTER\.device(-[a-zA-Z0-9_]+)*\.v1/</span><span class="tok-p">}</span>
                <span class="tok-p">}</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This slot allows any archetype named <code>openEHR-EHR-CLUSTER.device.v1</code> or <code>openEHR-EHR-CLUSTER.device-xxx.v1</code>, which used the ADL 1.4 method of signifying specialised archetypes.</p>
</div>
<div class="paragraph">
<p>The rule for namespace inclusion is as for external references:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>no namespace means the same namespace as the current archetype;</p>
</li>
<li>
<p>an explicit namespace means archetypes from that namespace.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As for external references, there is technically nothing to stop a slot RE being defined to refer to specific minor versions or builds of an archetype. The same rule applies: released archetypes should only include major versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adl_2_archetype_slots">6.2.2. ADL 2 Archetype Slots</h4>
<div class="paragraph">
<p>In ADL 2 a slot can be defined using a semantic (rather than lexical) expression in which matching archetypes are defined in the form of a constraint on the archetype concept (and optionally namespace), reminiscent of the SNOMED CT post-coordination constraint syntax. This is shown in the following example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-kt">allow_archetype </span><span class="tok-nc">CLUSTER</span> <span class="tok-p">[</span><span class="tok-nd">id4.1</span><span class="tok-p">]</span> <span class="tok-kt">occurrences </span><span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-m">0..1</span><span class="tok-p">}</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
        <span class="tok-kt">include </span><span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-l">True</span><span class="tok-p">}</span>
            <span class="tok-nc">archetype_id</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
                <span class="tok-nc">ARCHETYPE_ID</span> <span class="tok-o">∈</span> <span class="tok-p">{</span>
                    <span class="tok-nc">namespace</span> <span class="tok-o">∈</span> <span class="tok-p">{...}</span>
                    <span class="tok-nc">concept</span> <span class="tok-o">∈</span> <span class="tok-p">{</span><span class="tok-o">&lt;&lt;</span> <span class="tok-nc">investigation_methodology</span> <span class="tok-nc">OR</span>
                                    <span class="tok-o">&lt;&lt;</span> <span class="tok-nc">investigation_protocol</span><span class="tok-p">}</span>
                    <span class="tok-p">...</span>
                <span class="tok-p">}</span>
            <span class="tok-p">}</span>
        <span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above kind of referencing relies on an ontological underpinning for the <code>concept_id</code> part of the human-readable identifier.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aql_query_sets">6.3. AQL Query Sets</h3>
<div class="paragraph">
<p>AQL queries are in general authored in a ‘set’ in order to achieve a design objective, e.g. populate a report, screen, or for some analytical objective. Many are purely local in nature and may be considered ‘throwaway’. Others are carefully designed for needs like populating a clinical guideline or performing a standard computation. Within an archetyped framework, such query sets need to be indentified and managed in a similar way to other artefacts.</p>
</div>
</div>
<div class="sect2">
<h3 id="_aql_queries">6.4. AQL Queries</h3>
<div class="paragraph">
<p>Archetype-based queries contain archetype references and paths, and can also contain template identifiers and paths. Typical examples are the paths (in green) in the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    SELECT pulse
    FROM EHR[ehr_id/value=$ehruid]
     CONTAINS COMPOSITION c
     CONTAINS OBSERVATION pulse[openEHR-EHR-OBSERVATION.pulse.v1]

    WHERE c/name/value='Encounter` AND
        c/context/start_time/value &lt;= $endperiod AND
        c/context/start_time/value &gt;= $startPeriod AND
        pulse/data/events[id6]/data/items[id4]/value/value &lt; 60</pre>
</div>
</div>
<div class="paragraph">
<p>The semantics of referencing in queries differ from those of the archetype-to-archetype form, due to the fact that references are normally followed by paths that refer to specific data points within the structure. For an AQL query to be correct, the path must exist in the archetype at the release matched by the reference. Since minor versions can add to the archetype ‘interface’ (i.e. add data points, and therfore paths, to the structure), a given path needs to reference the oldest archetype for which the path is valid. Consider the following path:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-p">[</span><span class="tok-nd">openEHR-EHR-OBSERVATION.pulse.v1</span><span class="tok-p">]/</span><span class="tok-nc">data</span><span class="tok-p">/</span><span class="tok-nc">events</span><span class="tok-p">[</span><span class="tok-nd">at0006</span><span class="tok-p">]/</span><span class="tok-nc">data</span><span class="tok-p">/</span><span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-nd">at0004</span><span class="tok-p">]/</span><span class="tok-nc">value</span><span class="tok-p">/</span><span class="tok-nc">value</span><span class="tok-p"></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For this to be valid, the path <code>/data/events[at0006]/data/items[at0004]/value/value</code> must exist within the earliest v1.x release of the archetype openEHR-EHR-OBSERVATION.pulse.v1, i.e. v1.0.0. If this path happened to have been added in a more recent minor release, the archetype reference would need to include the first minor version containing that path.</p>
</div>
<div class="paragraph">
<p>Once an AQL query processor can work with a valid path, it will match the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>any instance of the data point at that path in the referenced archetype;</p>
</li>
<li>
<p>any instance of a data point in a congruent path in a specialisation child archetype.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An example of a congruent path in a child archetype is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="cadl">    <span class="tok-p">/</span><span class="tok-nc">data</span><span class="tok-p">/</span><span class="tok-nc">events</span><span class="tok-p">[</span><span class="tok-nd">id6.0.4</span><span class="tok-p">]/</span><span class="tok-nc">data</span><span class="tok-p">/</span><span class="tok-nc">items</span><span class="tok-p">[</span><span class="tok-nd">id4.1</span><span class="tok-p">]/</span><span class="tok-nc">value</span><span class="tok-p">/</span><span class="tok-nc">value</span><span class="tok-p"></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operational_artefacts">6.5. Operational Artefacts</h3>
<div class="paragraph">
<p>Operational artefacts such as flattened archetypes and operational templates generated by compiler tools are built from source artefacts, including by reference resolution from within some source artefacts to others within the current repository of the local and imported artefacts. The particular versions of reference targets are determined by the contents of the configuration, and are thus a function of version management activities, in the same way as for software development.</p>
</div>
<div class="paragraph">
<p>When an operational artefact is generated from controlled source artefacts (i.e. within a Custodian Organisation), it is possible to include the fine-grained revision information from the relevant source artefacts, so that the operational form describes exactly which set of source artefacts were used to produce it. The source artefact semantic signatures can also be included. This information can be included in a configuration section of the artefact. This would be expressed in ODIN (previously dADL) or an XML equivalent, and would list the 'configuration' of concrete artefact revisions used to generate the operational version.</p>
</div>
<div class="paragraph">
<p>The structure of a Configuration is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    configuration:      archetype_config     template_config     subset_config       rm_release
    archetype_config:   { config_item }+
    template_config:    { config_item }*
    subset_config:      { config_item }*
    rm_release:         rm_name release_id

    config_item:        identifier [ revision_id [ commit_id ] ] [ signature ]

    signature:          CHARACTER_SEQUENCE
    revision_id:        V_INTEGER
    commit_id:          V_INTEGER
    release_id:         V_STRING</pre>
</div>
</div>
<div class="paragraph">
<p>An example of the configuration of an operational template in a controlled environment (ODIN format) is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="odin">    <span class="tok-nc">archetypes</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;org.openehr::openEHR-EHR-OBSERVATION.heartrate.v1.3.28&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">signature</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;23895yw85y0y0&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.gov.nehta::openEHR-EHR-EVALUATION.genetic-diagnosis.v1.2.0&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">signature</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;98typrhweruhfd&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
        <span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;org.openehr::openEHR-EHR-EVALUATION.problem.v2.4.0&quot;</span><span class="tok-p">&gt;</span>
            <span class="tok-nc">signature</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;2rfhweiudfwieurfh&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">templates</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;au.gov.nehta::openEHR-EHR-COMPOSITION.vital_signs.v5.36.1&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">subsets</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">]</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
            <span class="tok-nc">id</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;org.ihtsdo.general::cardiac_diagnoses.v18.1.0&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
    <span class="tok-nc">rm</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span>
        <span class="tok-nc">name</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;org.openehr.rm&quot;</span><span class="tok-p">&gt;</span>
        <span class="tok-nc">release</span> <span class="tok-o">=</span> <span class="tok-p">&lt;</span><span class="tok-s">&quot;1.1&quot;</span><span class="tok-p">&gt;</span>
    <span class="tok-p">&gt;</span>
<span class="tok-p">&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_references_from_data">6.6. References from Data</h3>
<div class="sect3">
<h4 id="_requirements">6.6.1. Requirements</h4>
<div class="paragraph">
<p>In knowledge-enabled information environments such as those built on the archetype principles, knowledge artefacts are used to control the creation and validation of data, with the effect that data eventually stored in such systems ‘conform’ to the relevant artefacts. In order to be able to further process (e.g. display, modify and query) such data, references of some kind to the knowledge artefacts must be stored in the data. The requirements for such references depend on where the data are found, broadly within two possible situations, namely data within operational systems (e.g. EHR systems) and data within ‘messages’, ‘extracts’, or ‘documents’ sent between systems.</p>
</div>
<div class="paragraph">
<p>Three requirements can be identified with respect to data within systems.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Reconstitutability</em>: firstly, it must be possible to re-connect data with the archetypes, templates and subsets, used to create them. This implies that the major and minor versions at least are recorded in data, since a minor version may have an effect on structure.</p>
</li>
<li>
<p><em>Querying</em>: secondly, it must be possible to know what archetypes (including major version), and therefore what path-sets can be used for querying data - given that this may well include parents of specialised archteypes, not just the archetypes used to directly create the data.</p>
</li>
<li>
<p><em>Optimisation</em>: we can also assume that in a typical production system handling millions of health records, that the size of artefect identifiers embedded in data (especially if repeated) may be an issue, and that some kind of space optimisation may be required.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Within extracts or messages, the same requirements broadly hold, but could be better restated as follows.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Reconstitutability</em>: it must be possible for the receiving system to be able to determine the relationship of each data element with the artefacts(s) used to create it, so that it can be correctly reconstituted in the receiver system environment.</p>
</li>
<li>
<p><em>Querying</em>: for ensuring the correct functioning of querying, the extract or message should potentially carry sufficient archetype lineage information the archetypes used in the data to allow querying at the receiver, particularly if the latter wants to be able to query using more general parents (e.g. a ‘problem’ archetype rather than some specific diagnosis specialisation).</p>
</li>
<li>
<p><em>Optimisation</em>: a reasonable trade-off between space optimisation and clarity of representation must be used, given that messages, extracts etc flow between heterogeneous systems.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reconstitutability">6.6.2. Reconstitutability</h4>
<div class="paragraph">
<p>The reconstitutability requirement means recording archetype and template identifiers on the relevant nodes in the data. A basic form of this has always been used in openEHR, such that at archetype root nodes, the archetype identifier and if relevant the template identifier is recorded, and at interior nodes, the at-codes are recorded (formally, the archetype identifier and at-codes are recorded in the <code>LOCATABLE</code> .archetype_node_id attribute of each data node). For example, in data created based on openEHR Releases 1.0.2 or earlier, the archetype identifier references are of the form:</p>
</div>
<div class="paragraph">
<p><code>openEHR-EHR-EVALUATION.diagnosis.v1</code></p>
</div>
<div class="paragraph">
<p>With the more sophisticated identification system described here, these archetype references need to include namespace, and full version identifier, i.e.:</p>
</div>
<div class="paragraph">
<p><code>org.openehr::openEHR-EHR-EVALUATION.diagnosis.<strong>v1.29.0</strong></code></p>
</div>
<div class="paragraph">
<p>References with no namespace will remain legal, since there should be no computational impediment to using uncontrolled archetypes and templates, e.g. in an experimental situation. The lack of minor and patch level version numbers should also be legal for non-namespaced identifiers, and be interpreted as meaning <code>0</code> in both cases, i.e. <code>.v1</code> means <code>.v1.0.0</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_supporting_archetype_based_querying">6.6.3. Supporting Archetype-based Querying</h4>
<div class="paragraph">
<p>Querying of data in openEHR systems is assumed to be based on archetype ‘path-sets’, i.e. the set of paths extracted from an operational (flat-form) archetype. The paths are a slight simplification of standard X-paths. Two querying methods have been described to date, AQL and a-path, both making this assumption (see <a href="#openehr_query_aql">[openehr_query_aql]</a> ).</p>
</div>
<div class="paragraph">
<p>Based on this assumption, given an archetype X used to create data, the following archetypes could be used for querying:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>X, i.e. exact same version, revision &amp; commit;</p>
</li>
<li>
<p>any previous minor or patch variant of X;</p>
</li>
<li>
<p>any of the specialisation parents of X;</p>
</li>
<li>
<p>any previous minor or patch variant of any of the specialisation parents of X.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For non-specialised archetypes, the allowable querying archetypes can be deduced from the archetype reference recorded in the data. For specialised archetypes, the specialisation lineage can only be obtained from the operational form of the archetype, found in the template used to create the data. This would create a potential problem where for data imported from another site without the relevant template(s), the archetype lineage information was not available. This would prevent the query engine at the receiver system knowing how to query the data using even the more general archetypes in the lineage, that it may have access to.</p>
</div>
<div class="paragraph">
<p>To address this situation, one of the following strategies is required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>include the configuration meta-data from the operational template(s) with the data when it is exchanged, i.e. in an EHR Extract.</p>
</li>
<li>
<p>include archetype lineage information in the data itself. This could be a modified form of the identifier reference in the case of specialised archetypes to allow lineage information to be stored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second approach can be considered a generalisation of recording just the current archetype identifier, i.e. the ‘lineage’ for non-specialised archetypes evaluates to just that archetype id, and for specialised archteypes, it will be a list. This specification assumes that the second is used.</p>
</div>
<div class="paragraph">
<p>The simplest form of this would be as a list of operational identifiers, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    au.gov.nehta::openEHR-EHR-EVALUATION.genetic_diagnosis.v1.12.9,
    org.openehr::openEHR-EHR-EVALUATION.diagnosis.v1.29.0,
    org.openehr::openEHR-EHR-EVALUATION.problem.v2.4.18</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_formal_model_2">6.6.4. Formal Model</h4>
<div class="paragraph">
<p>A formal definition of reference catering to the above requirements is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    archetype_data_ref: archetype_ver_ref { ',' archteype_ver_ref }*
    archteype_ver_ref: hrid_root '.' version_id_ref
    version_id_ref: 'v' version_id</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optimisations">6.6.5. Optimisations</h4>
<div class="paragraph">
<p>In normal archetype-based data, both basic references and additional lineage information might be repeated throughout a given component, such as an openEHR or ISO 13606 <code>COMPOSITION</code> . Consider a <code>COMPOSITION</code> documenting problems &amp; diagnoses of the patient, where each problem is recorded using the archetype</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    uk.nhs.royalfree.clinical::openEHR-EHR-EVALUATION.diagnosis.v2.15.0</pre>
</div>
</div>
<div class="paragraph">
<p>whose lineage is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    org.openehr::openEHR-EHR-EVALUATION.diagnosis.v1.29.0
    org.openehr::openEHR-EHR-EVALUATION.problem.v2.4.0</pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the archetype reference lengths are 66, 57 and 54 characters respectively, i.e. a total of 177 characters. Repeated say 5 times would give 885 characters of identifier meta-data for the <code>COMPOSITION</code> , whose main clinical data could easily be similar. Even in an XML-based storage system, various kinds of compression are used, the identifier reference overhead might be considered as an unacceptable fraction of the overall data storage requirement.</p>
</div>
<div class="paragraph">
<p>It is therefore worth considering various simple optimisations, while retaining clarity and comprehensibility in the data. The following ideas are currently intended to be limited to serialised forms of data. They would therefore only require changes to openEHR XML-schemas rather than the abstract reference model.</p>
</div>
<div class="sect4">
<h5 id="_identifier_aliasing">Identifier Aliasing</h5>
<div class="paragraph">
<p>The most obvious optimisation is to use a set of variable references local to the data context, in this case an openEHR or ISO 13606 Extract. For example, at the top of the Extract, the following definitions could be made:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    id01=uk.nhs.royalfree::openEHR-EHR-EVALUATION.diagnosis.v2.15.0,
        org.openehr::openEHR-EHR-EVALUATION.diagnosis.v1.29.0,
        org.openehr::openEHR-EHR-EVALUATION.problem.v2.4.0
    id02=au.gov.nehta::openEHR-EHR-OBSERVATION.hba1c_result.v1.4,
        org.openehr::openEHR-EHR-OBSERVATION.lab_result.v1.18
    etc</pre>
</div>
</div>
<div class="paragraph">
<p>The identifiers <code>id01</code>, <code>id02</code> etc would then be used in the data, reducing the identifier overhead by perhaps 50% in some cases. This possibility would be enabled by adding an attribute to contain the variable definitions at the top of the <code>EHR_EXTRACT</code> type in the openEHR Reference Model, and in equivalent classes in other models.</p>
</div>
<div class="paragraph">
<p>The use of such variables will slightly complicate querying and other data processing, since a query that returns part of a Composition would return data containing meaningless local variable names rather than proper archetype meta-data.</p>
</div>
<div class="paragraph">
<p>A second question to consider is whether any parts of the identifiers could be removed. For example, it might initially appear that the reference model and class identification could be removed altogether, since the data when initially created would seem by definition to be based on the reference model and class of the archetype. However, neither are guaranteed. Consider the following two cases which use archetypes based on a different reference model to create data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a data extractor that transforms source data, say in openEHR form, to a standard form, say in ISO 13606 form. The archetype identifiers embedded in the latter data will be the original openEHR archetype identifiers (the extractor does not create new archetypes to do its transformation work);</p>
</li>
<li>
<p>a product that is directly based on another standard, such as ISO 13606 but uses the published library of openEHR archetypes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similarly, in the case of the class, the data may easily be based on a descendant (e.g. the <code>POINT_EVENT</code> class in openEHR) of the class mentioned in the archetype (e.g. <code>EVENT</code> ).</p>
</div>
<div class="paragraph">
<p>We therefore assume that although some of the above assumptions might be available in very particular environments, they cannot be safely made in general, particularly since it can never be predicted where data may be shared.</p>
</div>
</div>
<div class="sect4">
<h5 id="_reference_compression">Reference Compression</h5>
<div class="paragraph">
<p>Nevertheless, it would be possible to go further in terms of removing repetition in the once-only declarations. For instance, a compressed form of the archetype lineage information could be constructed, whereby repeated sections in each subsequent identifier are replaced by a special character. The example above would become:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    id01=uk.nhs.royalfree::openEHR-EHR-EVALUATION.diagnosis.v2.15.0,
        org.openehr::~.diagnosis.v1.29.0,
        ~::~.problem.v2.4.0
    id02=au.gov.nehta::openEHR-EHR-OBSERVATION.hba1c_result.v1.4.0,
        org.openehr.ehr::~.lab_result.v1.18.0</pre>
</div>
</div>
<div class="paragraph">
<p>The above syntax uses the <code>~</code> character in each identifier in the list to mean 'the missing parts are taken from the corresponding element(s) of the previous identifier in the list' (the inspiration is the use of the <code>~</code> in dictionaries to stand for the keyword). In this syntax, the concrete archetype used to create the data is guaranteed to appear first and in its entirety in the list.</p>
</div>
<div class="paragraph">
<p>Clearly in a particular system in which archetypes were only ever used from the same reference model as the system itself is built on, an even further reduced form of these references could be created. However, if the data were ever to be shared, such references would be in danger of being non-interoperable.</p>
</div>
<div class="paragraph">
<p>Whether the additional saving in space justifies the added complexity in parsing is debatable.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_reliable_uri_for_knowledge_resources">7. A Reliable URI for Knowledge Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There should be a standardised and reliable Uniform Resource Identifier (URI) for all released knowledge resources, in both source and operational forms. This may justify its own scheme-space, but is at least achievable within the normal http scheme-space.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_artefact_authentication">8. Artefact Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In theory, revision information should be reliable, and no two physical knowledge artefacts should exist that are either identical but have different identifiers and/or revision information, or are different but are identified as being the same. However, in practical systems, such situations can occur due to uncontrolled artefact creation, uncontrolled copying, and errors in version management.</p>
</div>
<div class="paragraph tbd">
<p><em>TBD</em>: hashing on source v operational artefacts? Consider templates that don’t change but referenced archetypes that do.</p>
</div>
<div class="sect2">
<h3 id="_integrity_check">8.1. Integrity Check</h3>
<div class="paragraph">
<p>It is therefore useful to be able to determine whether two artefacts (usually purported copies or subsequent revisions) are the same or not, even if the version information is the same. This can be achieved by the use of a digital hash function (e.g. SHA-1, MD5), which generates a 'fingerprint' of the artefact. Two archetypes with the same hash value must be the same – hash functions generate a different result if even a single bit is different in the input stream. However, applying such functions to the typical file representation of an archetype or template will not usually have the desired result. This is because differences in white-space and non-significant ordering, which make no difference to the semantics – will still generate different hash values. Other semantically insignificant differences include changes to meta-data values, such as descriptions, etc may have been changed (e.g. to correct spelling, improving wording), and changes or additions to translations.</p>
</div>
<div class="paragraph">
<p>As a consequence, the input to a hashing function for the purpose of generating a semantic signature of an openEHR knowledge artefact must be some canonical form of the original literal artefact, that is impervious to differences of the above types while retaining differences that will affect computation with such artefacts. The integrity check process is illustrated below.</p>
</div>
<div id="integrity_check" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/integrity_check.png" alt="integrity check" width="60%">
</div>
<div class="title">Figure 6. Integrity Check Scheme</div>
</div>
</div>
<div class="sect2">
<h3 id="_authentication">8.2. Authentication</h3>
<div class="paragraph">
<p>A second need to do with validity of knowledge artefacts is establishing their authenticity, i.e. their true origin. The usual way of supporting authentication is with a digital signature. A typical scheme based on the public key infrastructure (PKI) concept is for the producer of an artefact to sign it with their private key, and for the public key to be used by a consumer of the artefact to decrypt the signed entity.</p>
</div>
<div class="paragraph">
<p>In the case of openEHR knowledge artefacts, the need is to know the originating Custodian Organisation of an artefact. The PKI approach is for each CO to generate a key pair, and to provide the public key to the Central Governance Authority. Signing is then carried out using the CO private key on the hash digest already generated for an artefact. The modified process is illustrated in below.</p>
</div>
<div id="signing" class="imageblock text-center" style="text-align: center">
<div class="content">
<img src="diagrams/signing.png" alt="signing" width="80%">
</div>
<div class="title">Figure 7. Digital Signing</div>
</div>
</div>
<div class="sect2">
<h3 id="_canonical_form_archetype_semantic_view">8.3. Canonical Form – Archetype 'semantic view'</h3>
<div class="paragraph">
<p>For hashing and signing to be useful, the input artefacts need to have two characteristics. Firstly, we need to know that the artefact has been validated, since there is no use in disseminating digitally authenticated but useless artefacts. Secondly, the effects of ‘non-semantic’ changes in the artefact must be removed. This requires a syntactic canonical form.</p>
</div>
<div class="paragraph">
<p>Both requirements can be achieved for archetypes and templates with a canonical form based on a 'semantic view' of an archetype, analagous to the 'interface class' idea in software development. The semantic view is created from a specific serialisation of the abstract syntax tree (AST) form of the artefact, which is its computable form. The full AST form is in fact defined by the openEHR AOM, but this contains all textual meta-data from the description, ontology and other sections of the archetype. The ‘semantic’ form of this model, suitable for generating a normalised serialisation for hashing has the following reduced form:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the identifier;</p>
</li>
<li>
<p>specialisation identifier, where present;</p>
</li>
<li>
<p>concept code;</p>
</li>
<li>
<p>definition section (comments stripped).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These objects would be represented in the same form as defined by the AOM. A suitable serialisation is the dADL syntax form. XML forms could be used, but they depend on which schema variant is in use, and there is no single normative openEHR XML-schema for the AOM.</p>
</div>
<div class="paragraph tbd">
<p><em>TBD</em>: canonical forms of other artefact types. Since all forms of archetypes and templates are now AOM-based (as of 1.5), a single canonical algorithm based on the AOM (with TOM extensions) can be described.</p>
</div>
<div class="paragraph tbd">
<p><em>TBD</em>: Operational template hashing &amp; signing is required</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scenarios">9. Scenarios</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes typical scenarios to do with artefact development, deployment and querying.</p>
</div>
<div class="sect2">
<h3 id="_minor_version_upgrade">9.1. Minor Version Upgrade</h3>

</div>
<div class="sect2">
<h3 id="_major_version_upgrade">9.2. Major Version Upgrade</h3>

</div>
<div class="sect2">
<h3 id="_templates_using_archteypes_and_subsets">9.3. Templates using Archteypes and Subsets</h3>

</div>
<div class="sect2">
<h3 id="_artefact_transfer_fork">9.4. Artefact Transfer / Fork</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_references">References</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_publications">Publications</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="Beale_2000"></a>[Beale_2000] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> 2000.  Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_web_2000.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_2002"></a>[Beale_2002] Beale T. <strong>Archetypes: Constraint-based Domain Models for Future-proof Information Systems.</strong> Eleventh OOPSLA Workshop on Behavioral Semantics: Serving the Customer (Seattle, Washington, USA, November 4, 2002). Edited by Kenneth Baclawski and Haim Kilov. Northeastern University, Boston, 2002, pp. 16-32. Available at <a href="http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf" class="bare">http://www.openehr.org/files/resources/publications/archetypes/archetypes_beale_oopsla_2002.pdf</a> .</p>
</li>
<li>
<p><a id="Beale_Heard_2007"></a>[Beale_Heard_2007] <strong>An Ontology-based Model of Clinical Information</strong>. pp 760-764 Proceedings MedInfo 2007, K. Kuhn et al. (Eds), IOS Publishing 2007. Available at <a href="http://www.openehr.org/files/resources/publications/health_ict/MedInfo2007-BealeHeard.pdf" class="bare">http://www.openehr.org/files/resources/publications/health_ict/MedInfo2007-BealeHeard.pdf</a> .</p>
</li>
<li>
<p><a id="Eiffel"></a>[Eiffel] Meyer B. <strong>Eiffel the Language (2nd Ed).</strong> Prentice Hall, 1992.</p>
</li>
<li>
<p><a id="Hein"></a>[Hein] Hein J L. Discrete Structures, Logic and Computability (2nd Ed). Jones and Bartlett 2002.</p>
</li>
<li>
<p><a id="Kilov_Ross"></a>[Kilov_Ross] Kilov H, Ross J. <strong>Information Modelling: an Object-Oriented Approach.</strong> Prentice Hall 1994.
Guarino N, Poli R. Kluwer Academic Publishers. 1993 (Aug revision).</p>
</li>
<li>
<p><a id="Martin"></a>[Martin] Martin P. <strong>Translations between UML, OWL, KIF and the WebKB-2 languages (For-Taxonomy, Frame-CG, Formalized English)</strong>. May/June 2003. Available at <a href="http://www.webkb.org/doc/model/comparisons.html" class="bare">http://www.webkb.org/doc/model/comparisons.html</a> as at Aug 2004.</p>
</li>
<li>
<p><a id="Rector"></a>[Rector] Rector A L. <strong>Clinical terminology: why is it so hard?</strong> Methods Inf Med. 1999 Dec;38(4-5):239-52. Available at <a href="http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf" class="bare">http://www.cs.man.ac.uk/~rector/papers/Why-is-terminology-hard-single-r2.pdf</a> .</p>
</li>
<li>
<p><a id="Object_Z"></a>[Object_Z] Smith G. <strong>The Object Z Specification Language</strong>. Kluwer Academic Publishers 2000. See <a href="http://www.itee.uq.edu.au/~smith/objectz.html" class="bare">http://www.itee.uq.edu.au/~smith/objectz.html</a> .</p>
</li>
<li>
<p><a id="Sowa"></a>[Sowa] Sowa J F. <strong>Knowledge Representation: Logical, philosophical and Computational Foundations</strong>. 2000, Brooks/Cole, California.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_resources">Resources</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="bfo"></a>[bfo] Institute for Formal Ontology and Medical Information Science (IFOMIS). <strong>Basic Formal Ontology (BFO).</strong> <a href="http://ifomis.uni-saarland.de/bfo/" class="bare">http://ifomis.uni-saarland.de/bfo/</a> .</p>
</li>
<li>
<p><a id="cov_contra"></a>[cov_contra] Wikipedia. <strong>Covariance and contravariance.</strong> See <a href="https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science" class="bare">https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science</a>) .</p>
</li>
<li>
<p><a id="FMA"></a>[FMA] <a href="http://sig.biostr.washington.edu/projects/fm/" class="bare">http://sig.biostr.washington.edu/projects/fm/</a> .</p>
</li>
<li>
<p><a id="GeHR_AUS"></a>[GeHR_AUS] Heard S, Beale T. <strong>The Good Electronic Health Record (GeHR) (Australia).</strong> See <a href="http://www.openehr.org/resources/related_projects#gehraus" class="bare">http://www.openehr.org/resources/related_projects#gehraus</a> .</p>
</li>
<li>
<p><a id="hl7_v3_rim"></a>[hl7_v3_rim] HL7. <strong>HL7 v3 RIM</strong>. See <a href="http://www.hl7.org" class="bare">http://www.hl7.org</a> .</p>
</li>
<li>
<p><a id="Horrocks_owl"></a>[Horrocks_owl] Patel-Schneider P, Horrocks I, Hayes P. <strong>OWL Web Ontology Language Semantics and Abstract Syntax.</strong> See <a href="http://w3c.org/TR/owl-semantics/" class="bare">http://w3c.org/TR/owl-semantics/</a> .</p>
</li>
<li>
<p><a id="IAO"></a>[IAO] <strong>Information Artefact Ontology</strong>.  <a href="https://code.google.com/p/information-artifact-ontology/" class="bare">https://code.google.com/p/information-artifact-ontology/</a> .</p>
</li>
<li>
<p><a id="IHTSDO"></a>[IHTSDO] International Health Terminology Standards Development Organisation, <a href="http://www.ihtsdo.org" class="bare">http://www.ihtsdo.org</a>.</p>
</li>
<li>
<p><a id="Martin"></a>[Martin] Martin P. <strong>Translations between UML, OWL, KIF and the WebKB-2 languages (For-Taxonomy, Frame-CG, Formalized English)</strong>. May/June 2003. Available at <a href="http://www.webkb.org/doc/model/comparisons.html" class="bare">http://www.webkb.org/doc/model/comparisons.html</a> as at Aug 2004.</p>
</li>
<li>
<p><a id="OBO"></a>[OBO] <strong>The Open Biological and Biomedical Ontologies</strong>. See <a href="http://www.obofoundry.org/" class="bare">http://www.obofoundry.org/</a> .</p>
</li>
<li>
<p><a id="OCL"></a>[OCL] <strong>The Object Constraint Language 2.0.</strong> Object Management Group (OMG). Available at <a href="http://www.omg.org/cgi-bin/doc?ptc/2003-10-14" class="bare">http://www.omg.org/cgi-bin/doc?ptc/2003-10-14</a> .</p>
</li>
<li>
<p><a id="OGMS"></a>[OGMS] <strong>Ontology for General Medical Science (OGMS)</strong>. <a href="https://code.google.com/p/ogms/" class="bare">https://code.google.com/p/ogms/</a> .</p>
</li>
<li>
<p><a id="Perl_regex"></a>[Perl_regex] Perl.org. <strong>Perl Regular Expressions</strong>. Available at <a href="http://perldoc.perl.org/perlre.html" class="bare">http://perldoc.perl.org/perlre.html</a> .</p>
</li>
<li>
<p><a id="Protege"></a>[Protege] Stanford University. See <a href="http://protege.stanford.edu/" class="bare">http://protege.stanford.edu/</a> .</p>
</li>
<li>
<p><a id="rfc2781"></a>[rfc2781] IETF. <strong>RFC 2781.</strong> See <a href="http://tools.ietf.org/html/rfc2781" class="bare">http://tools.ietf.org/html/rfc2781</a>.</p>
</li>
<li>
<p><a id="rfc5646"></a>[rfc5646] IETF. <strong>RFC 5646.</strong> Available at <a href="http://tools.ietf.org/html/rfc5646" class="bare">http://tools.ietf.org/html/rfc5646</a>.</p>
</li>
<li>
<p><a id="synex"></a>[synex] University College London. <strong>SynEx project</strong>. <a href="http://www.chime.ucl.ac.uk/HealthI/SynEx/" class="bare">http://www.chime.ucl.ac.uk/HealthI/SynEx/</a> .</p>
</li>
<li>
<p><a id="sem_ver"></a>[sem_ver] <strong>Semantic Versioning</strong>. <a href="http://semver.org" class="bare">http://semver.org</a> .</p>
</li>
<li>
<p><a id="uri_syntax"></a>[uri_syntax] <strong>Uniform Resource Identifier (URI): Generic Syntax, Internet proposed standard</strong>. January 2005. see <a href="http://www.ietf.org/rfc/rfc3986.txt" class="bare">http://www.ietf.org/rfc/rfc3986.txt</a> .</p>
</li>
<li>
<p><a id="w3c_owl"></a>[w3c_owl] W3C. <strong>OWL - the Web Ontology Language</strong>. See <a href="http://www.w3.org/TR/2003/CR-owl-ref-20030818/" class="bare">http://www.w3.org/TR/2003/CR-owl-ref-20030818/</a> .</p>
</li>
<li>
<p><a id="w3c_xpath"></a>[w3c_xpath] W3C. <strong>XML Path Language</strong>. See <a href="http://w3c.org/TR/xpath" class="bare">http://w3c.org/TR/xpath</a> .</p>
</li>
<li>
<p><a id="WHO_ICD"></a>[WHO_ICD] World Health Organisation (WHO). <strong>International Classification of Diseases (ICD).</strong> See: <a href="http://www.who.int/classifications/icd/en/" class="bare">http://www.who.int/classifications/icd/en/</a> .</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_openehr_resources">openEHR Resources</h3>
<div class="olist bibliography">
<ol class="bibliography">
<li>
<p><a id="openEHR_ADL_workbench"></a>[openEHR_ADL_workbench] <strong>The openEHR ADL Workbench</strong>. <a href="http://www.openehr.org/downloads/ADLworkbench/home" class="bare">http://www.openehr.org/downloads/ADLworkbench/home</a> .</p>
</li>
<li>
<p><a id="openehr_CKM"></a>[openehr_CKM] <strong>The openEHR Clinical Knowledge Manager (CKM)</strong>. See <a href="http://www.openEHR.org/ckm" class="bare">http://www.openEHR.org/ckm</a></p>
</li>
<li>
<p><a id="openehr_overview"></a>[openehr_overview] The openEHR Architecture Overview. See <a href="http://www.openehr.org/releases/trunk/architecture/overview.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/overview.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_overview"></a>[openehr_am_overview] The openEHR Archetypes Technical Overview. See <a href="http://www.openehr.org/releases/trunk/architecture/am/archetype_technical_overview.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/archetype_technical_overview.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_am_principles"></a>[openehr_am_principles]. Archetype Definitions and Principles. See <a href="http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/principles/REV_HIST.html" class="bare">http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/principles/REV_HIST.html</a>.</p>
</li>
<li>
<p><a id="openehr_am_adl"></a>[openehr_am_adl] The openEHR Foundation. <strong>Archetype Definition Language (ADL2).</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/adl2.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_aom"></a>[openehr_am_aom] The openEHR Foundation. <strong>Archetype Object Model (AOM2).</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/aom2.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_system"></a>[openehr_am_system] The openEHR Archetype System. See <a href="http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/system/REV_HIST.html" class="bare">http://www.openehr.org/repositories/spec-dev/latest/publishing/architecture/archetypes/system/REV_HIST.html</a> .</p>
</li>
<li>
<p><a id="openehr_am_templates"></a>[openehr_am_templates] The openEHR Foundation. <strong>Template Guide</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/template_guide.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/template_guide.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_am_identification"></a>[openehr_am_identification] The openEHR Foundation. <strong>Archetype Identification specification.</strong> Available at <a href="http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/am/knowledge_id_system.pdf</a> .</p>
</li>
<li>
<p><a id="openehr_query_aql"></a>[openehr_query_aql] The openEHR Archetype Query language (AQL). See <a href="https://openehr.atlassian.net/wiki/display/spec/Archetype+Query+Language+Description" class="bare">https://openehr.atlassian.net/wiki/display/spec/Archetype+Query+Language+Description</a> .</p>
</li>
<li>
<p><a id="openehr_rm_data_types"></a>[openehr_rm_data_types] openEHR. <strong>Data Types Information Model.</strong> See <a href="http://www.openehr.org/releases/trunk/architecture/rm/data_types_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/data_types_im.pdf</a>.</p>
</li>
<li>
<p><a id="openehr_rm_ehr"></a>[openehr_rm_ehr] The openEHR Foundation. <strong>The EHR Information Model</strong>. <a href="http://www.openehr.org/releases/trunk/architecture/rm/ehr_im.pdf" class="bare">http://www.openehr.org/releases/trunk/architecture/rm/ehr_im.pdf</a> .</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-03 17:04:37 BST
</div>
</div>
</body>
</html>